(()=>{var t={232:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(571),o=n(32),i=n(529),a=n(146);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(d,t);var e,n,r,c,y=(r=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(c){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function d(t){var e,n=t.subject,r=t.viewport,o=t.world,i=t.z,c=void 0===i?1:i,l=t.instF,f=void 0!==l&&l,h=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["subject","viewport","world","z","instF"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(e=y.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},h))).z=c,e.pF=1/c,e.bounds={x:0,y:0,width:r.width,height:r.height},e.world=o||{width:r.width,height:r.height},e.onViewportChange=function(t){e.bounds.width=t.width*a.Z.devicePixelRatio,e.bounds.height=t.height*a.Z.devicePixelRatio,e.focusInst()},e.viewport=r,e.setSubject(n),r.on("change",e.onViewportChange),e.onViewportChange(r),e.instF=f,e.focus(),e}return e=d,(n=[{key:"intersects",value:function(t){return t===this||!(t.width||t.height||t.hitbox)||(0,o.ex)((0,i.SF)(t),this.bounds)}},{key:"setSubject",value:function(t){t&&(this.subject=t,this.offset=(0,i.LP)(t),this.focus())}},{key:"focusInst",value:function(){this.subject&&(this.pos.x=this.pF*-(0,o.uZ)(0,this.world.width-this.bounds.width,this.subject.pos.x+this.offset.x-this.bounds.width/2),this.pos.y=this.pF*-(0,o.uZ)(0,this.world.height-this.bounds.height,this.subject.pos.y+this.offset.y-this.bounds.height/2))}},{key:"focus",value:function(t){if(this.subject){var e=this.pF*-(0,o.uZ)(0,this.world.width-this.bounds.width,this.subject.pos.x+this.offset.x-this.bounds.width/2),n=this.pF*-(0,o.uZ)(0,this.world.height-this.bounds.height,this.subject.pos.y+this.offset.y-this.bounds.height/2);this.pos.x+=10*(e-this.pos.x)*t,this.pos.y+=10*(n-this.pos.y)*t}}},{key:"update",value:function(t){this.instF?this.focusInst():this.focus(t)}},{key:"onRemove",value:function(){this.viewport.off(this.onViewportChange)}}])&&l(e.prototype,n),d}(r.Z)},571:(t,e,n)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,{Z:()=>f});var c,s,u,l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.pos,r=void 0===n?{x:0,y:0}:n,i=e.rotation,a=e.scale,c=e.anchor,s=e.pivot,u=e.id,l=e.alpha;o(this,t),this.pos=r,this._visible=!0,a&&(this.scale=a),i&&(this.rotation=i),c&&(this.anchor=c),s&&(this.pivot=s),l&&(this.alpha=l),Boolean(u)&&(this.id=u,t.addRef(u,this))}return a(t,null,[{key:"addRef",value:function(t,e){this.__entities[t]=e}},{key:"removeRef",value:function(t){this.__entities[t]=null}},{key:"get",value:function(t){return this.__entities[t]}},{key:"cleanupRecursively",value:function(e){if(e.onRemove&&e.onRemove(),e.id&&this.removeRef(e.id),e.children){var n,o=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){s=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}(e.children);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.cleanupRecursively(i)}}catch(t){o.e(t)}finally{o.f()}}}},{key:"updateRecursively",value:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;if(e.movable&&(e.prevPosX=e.pos.x,e.prevPosY=e.pos.y,e.unduePosXUpdate&&(e.pos.x+=e.unduePosXUpdate,e.unduePosXUpdate=0),e.roll&&(e.prevRot=e.rotation)),e._visible=0!==e.alpha&&(!o.intersects||o.intersects(e)),(e._visible||e.forceUpdate)&&e.update&&e.update(n,r),e.children)for(var i=e.children,a=0,c=i.length;a<c;a++)t.updateRecursively(i[a],n,r,o)}},{key:"removeChild",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&(t.children=t.children.filter((function(t){return t!==e})),e.parent=null,n&&this.cleanupRecursively(e))}}]),a(t,[{key:"add",value:function(t){t.parent=this,this.children?this.children.push(t):this.children=[t]}},{key:"remove",value:function(e){t.removeChild(this.parent,this,e)}}]),t}();u={},(s="__entities")in(c=l)?Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[s]=u;const f=l},379:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=l(e);if(n){var o=l(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)});function i(t){var e,n=t.width,s=t.height,u=t.fill,l=t.stroke,f=t.strokeWidth,h=t.alpha,p=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["width","height","fill","stroke","strokeWidth","alpha"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},p))).width=n,e.height=s,e.fill=u,e.stroke=l,e.strokeWidth=f,e.alpha=h,e.type=o.JA,e}return i}(r.Z)},739:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)});function i(t){var e,n,c=t.frame,s=t.isCustom,u=void 0!==s&&s,l=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["frame","isCustom"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=r.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},l));var f=i._meta[c];return f.hitbox&&(n.hitbox=f.hitbox),n.hitCirc=null!==(e=f.hitCirc)&&void 0!==e?e:void 0,n.type=o.ey,n.initialRotation=f.rotation?-f.rotation*Math.PI/180:null,n.width=f.width,n.height=f.height,n.w=n.initialRotation?n.height:n.width,n.h=n.initialRotation?n.width:n.height,n.frame=u?[f.x,f.y,n.w,n.h]:c,n.initialRotation&&(n.initialPivotX=-n.height),n}return s(i,null,[{key:"injectAtlasmeta",value:function(t){this._meta=t}}]),s(i,[{key:"setAnchor",value:function(t){this.anchor=this.initialRotation?{x:t.y,y:t.x}:t}}]),i}(r.Z);h(p,"_assetsCache",null);const y=p},674:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(p,t);var e,n,r,i,h=(r=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(r);if(i){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function p(t){var e,n=t.imgId,r=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["imgId"]);if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=h.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r))).img=p._assetsCache.get(n),!e.img)throw new Error("Image with imgId ".concat(n," can't be found in the assets cache"));return e.type=o.hY,e}return e=p,n=[{key:"injectAssetsCache",value:function(t){this._assetsCache=t}}],null&&c(e.prototype,null),n&&c(e,n),p}(r.Z);f(h,"_assetsCache",null)},391:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Camera:()=>X.Z,Circle:()=>d,IsoCube:()=>Z,Node:()=>r.Z,Rect:()=>o.Z,TexRegion:()=>v.Z,Text:()=>k,Texture:()=>b.Z});var r=n(571),o=n(379),i=n(915);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=y(e);if(n){var o=y(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return p(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.radius,a=void 0===n?30:n,c=e.fill,u=e.stroke,h=void 0===u?"red":u,p=l(e,["radius","fill","stroke"]);return f(this,o),(t=r.call(this,s({},p))).radius=a,t.fill=c,t.stroke=h,t.type=i.Xw,t}return o}(r.Z);var b=n(674),v=n(739);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=P(e);if(n){var o=P(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return S(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.color,i=void 0===n?"white":n,a=e.size,c=void 0===a?"20pt":a,s=(e.value,A(e,["color","size","value"]));return x(this,o),(t=r.call(this,w({},s))).color=i,t.size=c,t}return o}(r.Z);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=M(e);if(n){var o=M(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return T(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.length,a=void 0===n?20:n,c=e.width,s=void 0===c?40:c,u=e.frontColor,l=void 0===u?"dimgrey":u,f=e.topColor,h=void 0===f?"#B97A57":f,p=e.sideColor,y=void 0===p?"#880015":p,d=I(e,["length","width","frontColor","topColor","sideColor"]);return B(this,o),(t=r.call(this,E({},d))).length=a,t.width=s,t.frontColor=l,t.topColor=h,t.sideColor=y,t.type=i.SE,t.hitbox={x:a/2,y:-a/2,width:s,height:s},t}return o}(r.Z);var X=n(232)},915:(t,e,n)=>{"use strict";n.d(e,{hY:()=>r,ey:()=>o,JA:()=>i,SE:()=>a,Xw:()=>c});var r="TEXTURE",o="TEXREGION",i="RECT",a="ISOCUBE",c="CIRCLE"},282:(t,e,n)=>{"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>c});const c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.events=e.reduce((function(t,e){return t[e]=[],t}),{}),Object.assign(this,n)}var e,n;return e=t,(n=[{key:"on",value:function(t,e){if(!this.events[t])throw new Error('attempting to listen to an unknown event: "'.concat(t,'"'));this.events[t].push(e)}},{key:"once",value:function(t,e){e.once=!0,this.on(t,e)}},{key:"off",value:function(t,e){if(!e)return this.events[t]=[];this.events[t]=this.events[t].filter((function(t){return t!==e}))}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var a=r(this.events[t]);a.forEach((function(n){n.apply(void 0,o),n.once&&e.off(t,n)}))}}])&&a(e.prototype,n),t}()},529:(t,e,n)=>{"use strict";n.d(e,{LP:()=>u,qj:()=>w,EJ:()=>O,EO:()=>A,$e:()=>x,SF:()=>j,mn:()=>S,Uz:()=>P,uF:()=>k,aZ:()=>C,vD:()=>I});var r,o,i,a=(r=[0,0].map((function(){return{x:0,y:0,width:0,height:0}})),o=0,function(t,e,n,i){return r[o=0===o?1:0].x=t,r[o].y=e,r[o].width=n,r[o].height=i,r[o]}),c=(i={x:0,y:0},function(t,e){return i.x=t,i.y=e,i}),s=function(){var t=[0,0].map((function(){return{x:0,y:0,radius:0}})),e=0;return function(n,r,o){return t[e=0===e?1:0].x=n,t[e].y=r,t[e].radius=o,t[e]}}();function u(t){var e=t.hitbox,n=t.hitcirc;return t.hitbox?{x:e.x+e.width/2,y:e.y+e.height/2}:t.hitcirc?{x:n.x,y:n.y}:{x:t.width/2,y:t.height/2}}var l=function(t){return t.x},f=function(t,e){return t.x-e.width},h=function(t,e){return t.x+(t.width-e.width)},p=function(t){return t.x+t.width},y=function(t,e){return t.x+(t.width-e.width)/2},d=function(t){return t.y},b=function(t,e){return t.y-e.height},v=function(t,e){return t.y+(t.height-e.height)},g=function(t){return t.y+t.height},m=function(t,e){return t.y+(t.height-e.height)/2};function w(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=c(o,i);switch(n){case"left":a.x+=l(t);break;case"center":a.x+=y(t,e);break;case"right":a.x+=h(t,e);break;default:throw new Error("Invalid x-alignment parameter: ".concat(n))}switch(r){case"top":a.y+=d(t);break;case"center":a.y+=m(t,e);break;case"bottom":console.log("At the bottom"),a.y+=v(t,e);break;default:throw new Error("Invalid y-alignment parameter: ".concat(r))}return a}function O(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=c(r,o);switch(n){case"top-start":i.x+=l(t),i.y+=b(t,e);break;case"top":i.x+=y(t,e),i.y+=b(t,e);break;case"top-end":i.x+=h(t,e),i.y+=b(t,e);break;case"right-start":i.x+=p(t),i.y+=d(t);break;case"right":i.x+=p(t),i.y+=m(t,e);break;case"right-end":i.x+=p(t),i.y+=v(t,e);break;case"bottom-start":i.x+=l(t),i.y+=g(t);break;case"bottom":i.x+=y(t,e),i.y+=g(t);break;case"bottom-end":i.x+=h(t,e),i.y+=g(t);break;case"left-start":i.x+=f(t,e),i.y+=d(t);break;case"left":i.x+=f(t,e),i.y+=m(t,e);break;case"left-end":i.x+=f(t,e),i.y+=v(t,e);break;default:throw new Error("Invalid stacking direction: ".concat(n))}return i}var A=function(t){for(var e=t[0],n=e.x,r=e.y,o=e.width,i=e.height,c=a(n,r,o,i),s=1;s<t.length;s++){var u=t[s],l=Math.max(c.x+c.width,u.x+u.width),f=Math.max(c.y+c.height,u.y+u.height);c.x=Math.min(c.x,u.x),c.y=Math.min(c.y,u.y),c.width=l-c.x,c.height=f-c.y}return c},x=function(t,e,n){switch(n){case"x":return{width:t.width+e.width,height:Math.max(t.height,e.height)};case"y":return{width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)};default:throw new Error("Invalid combine direction: ".concat(n))}};function j(t){var e=_(t);return t.hitbox?a(e.x+t.hitbox.x,e.y+t.hitbox.y,t.hitbox.width,t.hitbox.height):a(e.x,e.y,t.width,t.height)}function S(t){return t.hitbox?t.hitbox:a(0,0,t.width,t.height)}function P(t){var e=_(t);return s(e.x+t.hitCirc.x,e.y+t.hitCirc.y,t.hitCirc.radius)}function k(t,e){for(var n,r=t.parent;r;)n=e-r.pos.x,r=r.parent;t.pos.x=n}function C(t,e){for(var n,r=t.parent;r;)n=e-r.pos.y,r=r.parent;t.pos.y=n}function _(t){for(var e=t.pos.x,n=t.pos.y;t.parent;)e+=(t=t.parent).pos.x,n+=t.pos.y;return c(e,n)}var E=function(t){return t.w?t.w:t.width},R=function(t){return t.h?t.h:t.height};function I(t){if(!t.children)return{width:0,height:0};var e=t.children[0],n={minX:e.pos.x,minY:e.pos.y,maxX:e.pos.x+E(e),maxY:e.pos.y+R(e)},r=t.children.reduce((function(t,e){return{minX:Math.min(t.minX,e.pos.x),minY:Math.min(t.minY,e.pos.y),maxX:Math.max(t.maxX,e.pos.x+E(e)),maxY:Math.max(t.maxY,e.pos.y+R(e))}}),n);return{width:r.maxX-r.minX,height:r.maxY-r.minY}}},32:(t,e,n)=>{"use strict";n.d(e,{TN:()=>r,QC:()=>o,Q2:()=>i,d4:()=>a,uZ:()=>c,Xx:()=>s,nP:()=>l,bh:()=>f,Ht:()=>h,ex:()=>p,ge:()=>y,rA:()=>d,z4:()=>b,t:()=>g});var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+Math.floor((t-e+1)*Math.random())},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+(t-e)*Math.random()},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+Math.floor((t-e+1)*Math.random()*Math.random())},a=function(t){return t[r(t.length-1)]},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return Math.min(e,Math.max(t,n))},s=function(t){return 0===t?1:t/Math.abs(t)},u=function(t,e){return Math.floor(t*e)/e},l=function(t,e){return t*t+e*e},f={linear:function(t){return t},quadIn:function(t){return t*t},quadOut:function(t){return 1-this.quadIn(t-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return 1-this.cubicIn(1-t)},smoothStep:function(t){return t*t*(3-2*t)}},h=function(t,e){return!(u(t.x+t.width,1e4)<=u(e.x,1e4)||u(t.x,1e4)>=u(e.x+e.width,1e4)||u(t.y+t.height,1e4)<=u(e.y,1e4)||u(t.y,1e4)>=u(e.y+e.height,1e4))},p=function(t,e){return!(t.x+t.width<=e.x||t.x>=e.x+e.width||t.y+t.height<=e.y||t.y>=e.y+e.height)},y=function(t,e){var n=t.radius+e.radius,r=t.x+t.radius/2-(e.x+e.radius/2),o=t.y+t.radius/2-(e.y+e.radius/2);return r*r+o*o<=n*n},d=function(t,e){var n=e.x+e.radius-c(t.x,t.x+t.width,e.x+e.radius),r=e.y+e.radius-c(t.y,t.y+t.height,e.y+e.radius),o=n*n+r*r;return Math.round(o)<e.radius*e.radius},b=function(t,e){var n=Math.abs(Math.atan(t/e));return e>0&&t<0?-n:e<0&&t<0?Math.PI+n:e<0&&t>0?Math.PI-n:e>0&&t>0?n:0===t&&e>0?0:0===t&&e<0?Math.PI:0===e&&t>0?Math.PI/2:0===e&&t<0?-Math.PI/2:void 0},v={short:new RegExp("[0-9a-f]","g"),long:new RegExp("[0-9a-f]{2}","g")},g=function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000",e=4===t.length?"short":"long",n=v[e];return t.replace("#","").match(n).map((function(t){return parseInt(t.concat("short"===e?t:""),16)}))}(t).map((function(t){return t/255}))}},43:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var c=0;c<t.length;c++){var s=[].concat(t[c]);r&&o[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}},921:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var n,r,o=(r=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(n,r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[1],a=o[3];if("function"==typeof btoa){var c=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),u="/*# ".concat(s," */"),l=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[i].concat(l).concat([u]).join("\n")}return[i].join("\n")}},146:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>y});const u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,r=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=c(e);if(n){var o=c(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return i(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),s(a(e=r.call(this,["change"],t())),"x",0),s(a(e),"y",0),window.addEventListener("resize",(function(){var n=t();Object.assign(a(e),n),e.emit("change",a(e))})),e}return u}(n(282).Z);var l=1360,f=1080,h=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const y=(b=(d={SDKStrat:null,StorageStrat:function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.key=e}var e,n;return e=t,(n=[{key:"get",value:function(){return localStorage.getItem(this.key)}},{key:"set",value:function(t){localStorage.setItem(this.key,t)}}])&&p(e.prototype,n),t}(),showAdOnRestart:0,showAdOnResume:0,prerollAd:!1,testMode:!1,debug:!1}).testMode,v={viewport:new u((function(){var t=window.innerWidth,e=window.innerHeight,n=e>t;if(h)return{width:n?t:Math.max(t,e),height:n?Math.max(e,t):e};if(b)return{width:window.innerWidth,height:window.innerHeight};var r=n?f:l,o=n?l:f;return{width:Math.min(t,r),height:Math.min(e,o)}})),storageId:"jshdf190",worldWidth:1e3,worldHeight:window.innerHeight,gravity:1700,isMobile:h,scale:!1,get devicePixelRatio(){return this.testMode?1:Math.min(h?1.5:1,window.devicePixelRatio)},orientation:"portrait"},Object.assign(v,d));var d,b,v},661:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(921),o=n.n(r),i=n(43),a=n.n(i)()(o());a.push([t.id,"._1ABys8-8-_OHSD1WgNfrCA {\r\n    transition: opacity 0.25s linear;\r\n}","",{version:3,sources:["webpack://./src/entities/Player/style.css"],names:[],mappings:"AAAA;IACI,gCAAgC;AACpC",sourcesContent:[".ctrlBtn {\r\n    transition: opacity 0.25s linear;\r\n}"],sourceRoot:""}]),a.locals={ctrlBtn:"_1ABys8-8-_OHSD1WgNfrCA"};const c=a},1:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(921),o=n.n(r),i=n(43),a=n.n(i)()(o());a.push([t.id,".kBnvNgbdaWjN1JUPehZVl {\r\n    white-space: nowrap;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n}\r\n._2lHPVtCDOcovWkCo9WuhBr {\r\n    color: #ffe6d5;\r\n    background: black;\r\n    margin-left: -16px;\r\n    font-size: 1.5em;\r\n    padding: 10px 16px;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n}\r\n._2lHPVtCDOcovWkCo9WuhBr:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 50%;\r\n    border-width: 12px;\r\n    border-style: solid;\r\n    border-color: black transparent transparent transparent;\r\n}\r\n._1ggU-0hgNAcU2DVOMJWQLZ {\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    letter-spacing: 2px;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n    border-radius: 5px;\r\n}\r\n.lc0jbG1_QuFCjZS3-gers {\r\n    opacity: 0;\r\n    transition: opacity 0.25s linear;\r\n    user-select: none;\r\n    cursor: inherit;\r\n}\r\n.fqfOAOxskjZ7CSpKGysjL {\r\n    border-radius: 5px;\r\n    background: #333366;\r\n    opacity: 0;\r\n    z-index: 1;\r\n    transition: opacity 1s linear;\r\n}\r\n._2cCNjRBGCgpzkmR8i4dm_7 {\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.eI9EvLtxVH2HaEV7XABKr {\r\n    color: #fa664b;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n._1niWA6rwv5zoeCHQyf8yAz {\r\n    color: #e0c6e0;\r\n}\r\n._2chNllMXrIThEnxJvtvvow {\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.Z2wV4tFi4P3HcME7xm0vV {\r\n    display: none;\r\n}\r\n._3Z4Q7kHHX6KEBKSpcobAx4 {\r\n    opacity: 1;\r\n    background: #222;\r\n    font-size: 2em;\r\n    color: white;\r\n    z-index: 1;\r\n    display: none;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;\r\n    font-weight: bold;\r\n    letter-spacing: 2px;;\r\n}\r\n","",{version:3,sources:["webpack://./src/screens/Game/initUI/style.css"],names:[],mappings:"AAAA;IACI,mBAAmB;IACnB,cAAc;IACd,sBAAsB;IACtB,cAAc;IACd,iBAAiB;IACjB,gCAAgC;AACpC;AACA;IAEI,cAAc;IACd,iBAAiB;IACjB,kBAAkB;IAClB,gBAAgB;IAChB,kBAAkB;IAClB,kBAAkB;IAClB,sBAAsB;AAC1B;AACA;IACI,WAAW;IACX,kBAAkB;IAClB,SAAS;IACT,SAAS;IACT,kBAAkB;IAClB,mBAAmB;IACnB,uDAAuD;AAC3D;AACA;IACI,sBAAsB;IACtB,cAAc;IACd,eAAe;IACf,mBAAmB;IACnB,iBAAiB;IACjB,gCAAgC;IAChC,kBAAkB;AACtB;AACA;IACI,UAAU;IACV,gCAAgC;IAChC,iBAAiB;IACjB,eAAe;AACnB;AACA;IACI,kBAAkB;IAClB,mBAAmB;IACnB,UAAU;IACV,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;IACd,eAAe;IACf,sBAAsB;IACtB,mBAAmB;IACnB,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;IACd,eAAe;IACf,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;IACnB,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;AAClB;AACA;IACI,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,aAAa;AACjB;AACA;IACI,UAAU;IACV,gBAAgB;IAChB,cAAc;IACd,YAAY;IACZ,UAAU;IACV,aAAa;IACb,uBAAuB;IACvB,mBAAmB;IACnB,sHAAsH;IACtH,iBAAiB;IACjB,mBAAmB;AACvB",sourcesContent:[".txt {\r\n    white-space: nowrap;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n}\r\n.tooltip {\r\n    composes: txt;\r\n    color: #ffe6d5;\r\n    background: black;\r\n    margin-left: -16px;\r\n    font-size: 1.5em;\r\n    padding: 10px 16px;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n}\r\n.tooltip:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 50%;\r\n    border-width: 12px;\r\n    border-style: solid;\r\n    border-color: black transparent transparent transparent;\r\n}\r\n.timer {\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    letter-spacing: 2px;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n    border-radius: 5px;\r\n}\r\n.hidden {\r\n    opacity: 0;\r\n    transition: opacity 0.25s linear;\r\n    user-select: none;\r\n    cursor: inherit;\r\n}\r\n.overlay {\r\n    border-radius: 5px;\r\n    background: #333366;\r\n    opacity: 0;\r\n    z-index: 1;\r\n    transition: opacity 1s linear;\r\n}\r\n.time {\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.timeVal {\r\n    color: #fa664b;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.recTimeVal {\r\n    color: #e0c6e0;\r\n}\r\n.continue {\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.dead {\r\n    display: none;\r\n}\r\n.blurOverlay {\r\n    opacity: 1;\r\n    background: #222;\r\n    font-size: 2em;\r\n    color: white;\r\n    z-index: 1;\r\n    display: none;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;\r\n    font-weight: bold;\r\n    letter-spacing: 2px;;\r\n}\r\n"],sourceRoot:""}]),a.locals={txt:"kBnvNgbdaWjN1JUPehZVl",tooltip:"_2lHPVtCDOcovWkCo9WuhBr kBnvNgbdaWjN1JUPehZVl",timer:"_1ggU-0hgNAcU2DVOMJWQLZ",hidden:"lc0jbG1_QuFCjZS3-gers",overlay:"fqfOAOxskjZ7CSpKGysjL",time:"_2cCNjRBGCgpzkmR8i4dm_7",timeVal:"eI9EvLtxVH2HaEV7XABKr",recTimeVal:"_1niWA6rwv5zoeCHQyf8yAz",continue:"_2chNllMXrIThEnxJvtvvow",dead:"Z2wV4tFi4P3HcME7xm0vV",blurOverlay:"_3Z4Q7kHHX6KEBKSpcobAx4"};const c=a},806:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(921),o=n.n(r),i=n(43),a=n.n(i)()(o());a.push([t.id,"._2dxZo1LuY05qYQk5cWBGAj {\r\n    transform: scale(-1, 1);\r\n}\r\n._3vdgYio4yaebTL7u79N62v {\r\n    color: #ffe6d5;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    font-weight: 700;\r\n    white-space: nowrap;\r\n    z-index: 1;\r\n    user-select: none;\r\n}\r\n._22uFm83qwojCfg8hmv6Yql {\r\n    font-size: 1.2em;\r\n    color: #eabeac;\r\n}\r\n@media (max-width:600px)  {\r\n    ._22uFm83qwojCfg8hmv6Yql {\r\n        font-size: 0.75em !important;\r\n    }\r\n    ._3vdgYio4yaebTL7u79N62v {\r\n        font-size: 1.25em;\r\n    }\r\n}\r\n._34sI9l4leBq2HWmVtVKMz5 {\r\n    transition: opacity linear 0.125s;\r\n    opacity: 0;\r\n}\r\n._33T254Eh2ILhm_nusDbjXu {\r\n    transition: opacity linear 0.250s;\r\n}\r\n._3H227XjaA5OSILiuNsLx2P:hover {\r\n    opacity: 1;\r\n}\r\n.aA9CxtPMIYcN-bXcV3l_i {\r\n    color: tomato;\r\n    font-size: 1.5em;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n}\r\n._1B0xVLXoPlp_en5mM907su {\r\n    opacity: 0;\r\n    transition: opacity 0.5s linear;\r\n}\r\n.UbeNJHa88KANlX_8vZHCY {\r\n    color: silver;\r\n    font-size: 1.5em;\r\n    font-family: momospace;\r\n}\r\n","",{version:3,sources:["webpack://./src/screens/Level/style.css"],names:[],mappings:"AAAA;IACI,uBAAuB;AAC3B;AACA;IACI,cAAc;IACd,cAAc;IACd,sBAAsB;IACtB,gBAAgB;IAChB,mBAAmB;IACnB,UAAU;IACV,iBAAiB;AACrB;AACA;IACI,gBAAgB;IAChB,cAAc;AAClB;AACA;IACI;QACI,4BAA4B;IAChC;IACA;QACI,iBAAiB;IACrB;AACJ;AACA;IACI,iCAAiC;IACjC,UAAU;AACd;AACA;IACI,iCAAiC;AACrC;AACA;IACI,UAAU;AACd;AACA;IACI,aAAa;IACb,gBAAgB;IAChB,sBAAsB;IACtB,mBAAmB;AACvB;AACA;IACI,UAAU;IACV,+BAA+B;AACnC;AACA;IACI,aAAa;IACb,gBAAgB;IAChB,sBAAsB;AAC1B",sourcesContent:[".prevBtn {\r\n    transform: scale(-1, 1);\r\n}\r\n.infoTitle {\r\n    color: #ffe6d5;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    font-weight: 700;\r\n    white-space: nowrap;\r\n    z-index: 1;\r\n    user-select: none;\r\n}\r\n.infoSub {\r\n    font-size: 1.2em;\r\n    color: #eabeac;\r\n}\r\n@media (max-width:600px)  {\r\n    .infoSub {\r\n        font-size: 0.75em !important;\r\n    }\r\n    .infoTitle {\r\n        font-size: 1.25em;\r\n    }\r\n}\r\n.icon {\r\n    transition: opacity linear 0.125s;\r\n    opacity: 0;\r\n}\r\n.startBtn {\r\n    transition: opacity linear 0.250s;\r\n}\r\n.playBtn:hover {\r\n    opacity: 1;\r\n}\r\n.error {\r\n    color: tomato;\r\n    font-size: 1.5em;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n}\r\n.hidden {\r\n    opacity: 0;\r\n    transition: opacity 0.5s linear;\r\n}\r\n.retry {\r\n    color: silver;\r\n    font-size: 1.5em;\r\n    font-family: momospace;\r\n}\r\n"],sourceRoot:""}]),a.locals={prevBtn:"_2dxZo1LuY05qYQk5cWBGAj",infoTitle:"_3vdgYio4yaebTL7u79N62v",infoSub:"_22uFm83qwojCfg8hmv6Yql",icon:"_34sI9l4leBq2HWmVtVKMz5",startBtn:"_33T254Eh2ILhm_nusDbjXu",playBtn:"_3H227XjaA5OSILiuNsLx2P",error:"aA9CxtPMIYcN-bXcV3l_i",hidden:"_1B0xVLXoPlp_en5mM907su",retry:"UbeNJHa88KANlX_8vZHCY"};const c=a},673:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(921),o=n.n(r),i=n(43),a=n.n(i)()(o());a.push([t.id,"._2jdDmJpB0m2pgCwnQXkXp0 {\r\n    font-size: 16px;\r\n    color: #ffe6d5;\r\n    font-family: monospace;\r\n    letter-spacing: 4px;\r\n    white-space: nowrap;\r\n}\r\n._3jHrN0bUvMonJnX0kLE_H5 {\r\n    letter-spacing: 0;\r\n}\r\n._28whNcPBsAxhOYxXkHBOdc {\r\n    border-radius: 5px;\r\n}","",{version:3,sources:["webpack://./src/screens/Loading/style.css"],names:[],mappings:"AAAA;IACI,eAAe;IACf,cAAc;IACd,sBAAsB;IACtB,mBAAmB;IACnB,mBAAmB;AACvB;AACA;IACI,iBAAiB;AACrB;AACA;IACI,kBAAkB;AACtB",sourcesContent:[".txt {\r\n    font-size: 16px;\r\n    color: #ffe6d5;\r\n    font-family: monospace;\r\n    letter-spacing: 4px;\r\n    white-space: nowrap;\r\n}\r\n.info {\r\n    letter-spacing: 0;\r\n}\r\n.bar {\r\n    border-radius: 5px;\r\n}"],sourceRoot:""}]),a.locals={txt:"_2jdDmJpB0m2pgCwnQXkXp0",info:"_3jHrN0bUvMonJnX0kLE_H5",bar:"_28whNcPBsAxhOYxXkHBOdc"};const c=a},731:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(921),o=n.n(r),i=n(43),a=n.n(i)()(o());a.push([t.id,"._35YmgIRdM1rGTagRZdiMWH {\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    transition: opacity 0.25s linear;\r\n}\r\n\r\n._5nb22jczr2iRQl6GzsxhG {\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    background: #ffe6d5;\r\n    animation-name: uP3_D0Wi7V8GXgXu0IENq;\r\n    animation-duration: 0.75s;\r\n    animation-iteration-count: infinite;\r\n}\r\n._3lEQuyyX-I9YTwqE1mHS1o {\r\n    animation-delay: 0s;\r\n}\r\n._1h3b1j-Uhme2WBBixZS7-Z {\r\n    animation-delay: 0.25s;\r\n    margin-left: 16px;\r\n}\r\n.bancwqSaH-c4kiW34bN3V {\r\n    animation-delay: 0.5s;\r\n    margin-left: 32px;\r\n}\r\n@keyframes uP3_D0Wi7V8GXgXu0IENq {\r\n    0% { opacity: 0 }\r\n    100% { opacity: 1 }\r\n}\r\n\r\n.-P5MQXKbIsmfEcxD8zhki {\r\n    background: linear-gradient(145deg, #f5f5f5, #dcdcdc); /* Soft moonlight gradient */\r\n    font-size: 1.5em;\r\n    color: #e15c22;\r\n    padding: 0.6em 1.2em; /* Adjusted padding for balance */\r\n    border-radius: 0.4em; /* Slightly more rounded for smoother look */\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    letter-spacing: 1px;\r\n    user-select: none;\r\n    border: none;\r\n    box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.2), /* Soft 3D shadow */\r\n                inset 2px 2px 4px rgba(255, 255, 255, 0.3); /* Inner glow */\r\n    transition: opacity 0.3s ease, transform 0.3s ease;\r\n}\r\n\r\n.-P5MQXKbIsmfEcxD8zhki:hover, .-P5MQXKbIsmfEcxD8zhki:active, .-P5MQXKbIsmfEcxD8zhki:focus {\r\n    background: linear-gradient(145deg, #ffffff, #e0e0e0); /* Lighter gradient on hover */\r\n    transform: translateY(-2px); /* Slight lift effect */\r\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1), Less shadow for pressed effect\r\n    inset 0px 0px 8px 3px rgba(255, 150, 100, 0.5); /* Stronger inner glow */\r\n}\r\n\r\n.-P5MQXKbIsmfEcxD8zhki:active {\r\n    transform: translateY(2px); /* Button presses inwards when clicked */\r\n    box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2), /* Less shadow for pressed effect */\r\n                inset 0px 0px 8px 3px rgba(255, 150, 100, 0.5); /* Stronger inner glow */\r\n}\r\n","",{version:3,sources:["webpack://./src/screens/ui/style.css"],names:[],mappings:"AAAA;IACI,6BAA6B;IAC7B,eAAe;IACf,gCAAgC;AACpC;;AAEA;IACI,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,mBAAmB;IACnB,qCAAuB;IACvB,yBAAyB;IACzB,mCAAmC;AACvC;AACA;IACI,mBAAmB;AACvB;AACA;IACI,sBAAsB;IACtB,iBAAiB;AACrB;AACA;IACI,qBAAqB;IACrB,iBAAiB;AACrB;AACA;IACI,KAAK,WAAW;IAChB,OAAO,WAAW;AACtB;;AAEA;IACI,qDAAqD,EAAE,4BAA4B;IACnF,gBAAgB;IAChB,cAAc;IACd,oBAAoB,EAAE,iCAAiC;IACvD,oBAAoB,EAAE,4CAA4C;IAClE,eAAe;IACf,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;IACnB,iBAAiB;IACjB,YAAY;IACZ;0DACsD,EAAE,eAAe;IACvE,kDAAkD;AACtD;;AAEA;IACI,qDAAqD,EAAE,8BAA8B;IACrF,2BAA2B,EAAE,uBAAuB;IACpD;kDAC8C,EAAE,wBAAwB;AAC5E;;AAEA;IACI,0BAA0B,EAAE,wCAAwC;IACpE;8DAC0D,EAAE,wBAAwB;AACxF",sourcesContent:[".imgBtn {\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    transition: opacity 0.25s linear;\r\n}\r\n\r\n.loadingDot {\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    background: #ffe6d5;\r\n    animation-name: loading;\r\n    animation-duration: 0.75s;\r\n    animation-iteration-count: infinite;\r\n}\r\n.dotA {\r\n    animation-delay: 0s;\r\n}\r\n.dotB {\r\n    animation-delay: 0.25s;\r\n    margin-left: 16px;\r\n}\r\n.dotC {\r\n    animation-delay: 0.5s;\r\n    margin-left: 32px;\r\n}\r\n@keyframes loading {\r\n    0% { opacity: 0 }\r\n    100% { opacity: 1 }\r\n}\r\n\r\n.playBtn {\r\n    background: linear-gradient(145deg, #f5f5f5, #dcdcdc); /* Soft moonlight gradient */\r\n    font-size: 1.5em;\r\n    color: #e15c22;\r\n    padding: 0.6em 1.2em; /* Adjusted padding for balance */\r\n    border-radius: 0.4em; /* Slightly more rounded for smoother look */\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    letter-spacing: 1px;\r\n    user-select: none;\r\n    border: none;\r\n    box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.2), /* Soft 3D shadow */\r\n                inset 2px 2px 4px rgba(255, 255, 255, 0.3); /* Inner glow */\r\n    transition: opacity 0.3s ease, transform 0.3s ease;\r\n}\r\n\r\n.playBtn:hover, .playBtn:active, .playBtn:focus {\r\n    background: linear-gradient(145deg, #ffffff, #e0e0e0); /* Lighter gradient on hover */\r\n    transform: translateY(-2px); /* Slight lift effect */\r\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1), Less shadow for pressed effect\r\n    inset 0px 0px 8px 3px rgba(255, 150, 100, 0.5); /* Stronger inner glow */\r\n}\r\n\r\n.playBtn:active {\r\n    transform: translateY(2px); /* Button presses inwards when clicked */\r\n    box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2), /* Less shadow for pressed effect */\r\n                inset 0px 0px 8px 3px rgba(255, 150, 100, 0.5); /* Stronger inner glow */\r\n}\r\n"],sourceRoot:""}]),a.locals={imgBtn:"_35YmgIRdM1rGTagRZdiMWH",loadingDot:"_5nb22jczr2iRQl6GzsxhG",loading:"uP3_D0Wi7V8GXgXu0IENq",dotA:"_3lEQuyyX-I9YTwqE1mHS1o",dotB:"_1h3b1j-Uhme2WBBixZS7-Z",dotC:"bancwqSaH-c4kiW34bN3V",playBtn:"-P5MQXKbIsmfEcxD8zhki"};const c=a},562:(t,e,n)=>{t.exports=n.p+"assets/07c98c445855c5c4476429d1e33486f5.cson"},284:(t,e,n)=>{t.exports=n.p+"assets/17a5e64fdf00c686ed788767b75b5df3.mp3"},343:(t,e,n)=>{t.exports=n.p+"assets/5ea22db127bf58d7edacd4e27de15128.cson"},716:(t,e,n)=>{t.exports=n.p+"assets/cd3cbf8f37bcd08c3cbc8ab297c0dfd9.png"},126:(t,e,n)=>{t.exports=n.p+"assets/2535eb4d049464bff875670555b8efd6.png"},987:(t,e,n)=>{t.exports=n.p+"assets/48b0df5de1822d037c3e0da1056d5ea0.png"},524:(t,e,n)=>{t.exports=n.p+"assets/2a19667466be46c7b96d969d0f68f723.png"},399:(t,e,n)=>{t.exports=n.p+"assets/ec8b65d405f50357bf99224c24ad7e2e.png"},210:(t,e,n)=>{t.exports=n.p+"assets/3c92faa2a2f84dc5a4a752de743a7521.png"},976:(t,e,n)=>{t.exports=n.p+"assets/6d20d50c4325d374f53558afe76267a1.png"},229:(t,e,n)=>{t.exports=n.p+"assets/74d1202a0fc2f45361702ef9520989af.png"},73:(t,e,n)=>{t.exports=n.p+"assets/667305c7749f4cc363a07c4cedcc4e58.png"},315:(t,e,n)=>{t.exports=n.p+"assets/e864417a5cd342b1fe190beed41cd2f3.png"},224:(t,e,n)=>{t.exports=n.p+"assets/0ca9736dc31ac025b4a21bf7942a86fc.png"},102:(t,e,n)=>{t.exports=n.p+"assets/80b7b67277fabe5881e19db3ae8d119a.cson"},942:(t,e,n)=>{t.exports=n.p+"assets/629a0261aa38809f626b97c75c2cd20d.cson"},184:(t,e,n)=>{t.exports=n.p+"assets/219934c58001e17ddcf369ca20f768cf.cson"},559:(t,e,n)=>{t.exports=n.p+"assets/f6f87743c611252be421a4b359607457.cson"},867:(t,e,n)=>{t.exports=n.p+"assets/1db215397ce4431cbba8cbecd2c00849.cson"},671:(t,e,n)=>{t.exports=n.p+"assets/e7043f79214f629e8df091157cf1368c.cson"},799:(t,e,n)=>{t.exports=n.p+"assets/3e6ada5a8b0bc5f97b91808d80f07e0a.cson"},235:(t,e,n)=>{t.exports=n.p+"assets/af903ba7f995fd00c067563ab2cfde76.cson"},818:(t,e,n)=>{t.exports=n.p+"assets/1b8fc2b7508e99db2348de7c84f498cb.cson"},508:(t,e,n)=>{t.exports=n.p+"assets/98d1121390135652ce1243461363d583.cson"},579:(t,e,n)=>{t.exports=n.p+"assets/c7e44ba8b1dec2b016af516370db1071.cson"},582:(t,e,n)=>{t.exports=n.p+"assets/0071b40f2d12d8a2f4db3d9d1d2c8ec7.cson"},911:(t,e,n)=>{t.exports=n.p+"assets/872e4f81a307a189788af2b1738b7969.cson"},644:(t,e,n)=>{t.exports=n.p+"assets/f728efa8df13fb51278b6bf604a4e975.cson"},994:(t,e,n)=>{"use strict";var r,o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function a(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},r=[],o=0;o<t.length;o++){var c=t[o],s=e.base?c[0]+e.base:c[0],u=n[s]||0,l="".concat(s," ").concat(u);n[s]=u+1;var f=a(l),h={css:c[1],media:c[2],sourceMap:c[3]};-1!==f?(i[f].references++,i[f].updater(h)):i.push({identifier:l,updater:d(h,e),references:1}),r.push(l)}return r}function s(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=o(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var u,l=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=l(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function h(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,y=0;function d(t,e){var n,r,o;if(e.singleton){var i=y++;n=p||(p=s(e)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else n=s(e),r=h.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var o=a(n[r]);i[o].references--}for(var s=c(t,e),u=0;u<n.length;u++){var l=a(n[u]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=s}}}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";var t=n(571);function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const r=function(n){var r,o,i=n.mainUpdateFn,a=void 0===i?function(){}:i,c=n.renderer,s=n.step,u=void 0===s?100:s,l=(r=[30,60].map((function(t){return 1e3/t})),o=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(r,o)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=l[0],h=l[1],p=h/1e3,y=0,d=0,b=1,v=!1;return requestAnimationFrame((function e(n){var r=b*Math.min(n-y,u),o=n-d,i=n/1e3;if(v)return requestAnimationFrame(e);for(;r>=h;)c.scene.update?c.scene.update(p,i):t.Z.updateRecursively(c.scene,p,i,c.scene),a(p,i),r-=h;o>=f?(c.renderRecursively(),d=n-(o-f)):d=n-o,y=n-r,requestAnimationFrame(e)})),{pause:function(){v=!0},resume:function(){v=!1},setSpeed:function(t){b=t},get meta(){return{elapsed:y/1e3}}}};var o=n(674),i="col-rects",a=Math.PI/4,c=3*Math.PI/4,s="obj-layer",u="offline";function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=void 0!==AudioContext&&null!==AudioContext;const b=d?function(){var t=new AudioContext,e=function(){function e(n){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.loop,a=void 0!==i&&i,c=o.volume,s=void 0===c?1:c,u=o.pan,f=void 0===u?0:u,h=o.speed,p=void 0===h?1:h;l(this,e),this.buffer=n,this.panNode=t.createStereoPanner(),this.volumeNode=t.createGain(),this.panNode.pan.value=f,this.volumeNode.gain.value=s,this._speed=p,this._loop=a,this.playedFrom=0,this.offset=0,this.playTill=n.duration,this.lastPlayedAt=0,this.playing=!1,this.onEnded=function(){return r.playing=!1},e.onCreated(this)}return h(e,null,[{key:"getPaused",value:function(){return this._on}},{key:"off",value:function(){this._on=!1}},{key:"on",value:function(){this._on=!0}},{key:"onCreated",value:function(){}},{key:"onDestroyed",value:function(){}},{key:"destroy",value:function(t){e.onDestroyed(t)}}]),h(e,[{key:"pause",value:function(){if(this.playing){var e=t.currentTime-this.lastPlayedAt,n=this.offset+e,r=this.playTill-this.playedFrom;this.offset=this.loop?n%r:Math.min(n,r),this._stop()}}},{key:"resume",value:function(){if(!this.playing&&e._on){var t=this.playedFrom+this.offset,n=this.playTill-t;this._play(t,n)}}},{key:"play",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;if(!this.playing&&e._on){o&&(this.volume=o);var i=r||this.buffer.duration;this.playedFrom=n,this.offset=0,this.playTill=n+i,this.lastPlayedAt=t.currentTime,this._play(n,i)}}},{key:"_stop",value:function(){var t=this.sourceNode;t&&t.stop(0)}},{key:"_play",value:function(e,n){var r,o=this.buffer,i=this.panNode,a=this.volumeNode,c=this._loop,s=this._speed,u=t.createBufferSource(),l=(r=u,function(t,e,n){if(r.loop)return r.loopStart=e,r.loopEnd=e+n,r.start(t,e);r.start(t,e,n)});this.sourceNode=u,this.lastPlayedAt=t.currentTime,u.buffer=o,u.loop=c,u.playbackRate.value=s,u.connect(i),i.connect(a),a.connect(t.destination),l(t.currentTime,e,n),u.onended=this.onEnded,this.playing=!0}},{key:"speed",set:function(t){this._speed=t,this.sourceNode&&this.sourceNode.playbackRate.setValueAtTime(t,0)}},{key:"volume",set:function(t){this.volumeNode.gain.setValueAtTime(t,0)}},{key:"pan",set:function(t){this.panNode.pan.setValueAtTime(t,0)},get:function(){this.panNode.pan.value}}]),e}();return p(e,"_on",!0),p(e,"loadResource",(function(e){return new Promise((function(n,r){fetch(e).then((function(t){return t.arrayBuffer()})).then((function(e){return function(e){return new Promise((function(n,r){t.decodeAudioData(e,n,r)}))}(e)})).then((function(t){return n(t)})).catch((function(){return r({message:u})}))}))})),e}():(g=v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"off",value:function(){}},{key:"on",value:function(){}},{key:"destroy",value:function(){}}],(n=[{key:"pause",value:function(){}},{key:"resume",value:function(){}},{key:"play",value:function(){}}])&&y(e.prototype,n),r&&y(e,r),t}(),O=function(t){return Promise.resolve(t)},(w="loadResource")in(m=v)?Object.defineProperty(m,w,{value:O,enumerable:!0,configurable:!0,writable:!0}):m[w]=O,g);var v,g,m,w,O;function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const j=function(){function t(e){var n=this,r=e.renderer,i=e.assetsCache,a=e.screenFactories,c=e.activeScreen;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,"_activeScreen",null),x(this,"_sounds",[]),x(this,"paused",!1),x(this,"pausedSounds",[]),this._assetsCache=i,this.renderer=r,Object.keys(a).forEach((function(t){var e=a[t];n[t]=e(n),n[t].name=t})),o.Z.injectAssetsCache(i),b.onCreated=function(t){n._sounds.push(t)},b.onDestroyed=function(t){n._sounds=n._sounds.filter((function(e){return e!==t}))},c&&this.switchScreen(c)}var e,n;return e=t,(n=[{key:"switchScreen",value:function(t){var e;this._activeScreen&&this._activeScreen.onExit(),this._activeScreen=this[t],this.renderer.scene=this._activeScreen,this._activeScreen.background&&this.renderer.changeBackground(this._activeScreen.background);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this._activeScreen).onEnter.apply(e,r)}},{key:"disposeScreen",value:function(t){this[t.name]=null}},{key:"_update",value:function(t,e){this._activeScreen.update&&this._activeScreen.update(t,e)}},{key:"start",value:function(){this.loopControls=r({mainUpdateFn:function(){},renderer:this.renderer})}},{key:"stopSounds",value:function(){this._sounds.forEach((function(t){t.pause()}))}},{key:"pauseSounds",value:function(){this.pausedSounds=this._sounds.filter((function(t){return t.playing})),this._sounds.forEach((function(t){t.pause()}))}},{key:"turnOffSound",value:function(){this.stopSounds(),b.off()}},{key:"turnOnSound",value:function(){b.on()}},{key:"pause",value:function(){this.paused||(this.paused=!0,this.loopControls.pause(),this.pauseSounds())}},{key:"resume",value:function(){this.paused&&(this.paused=!1,this.loopControls.resume(),this.pausedSounds.forEach((function(t){t.resume()})))}},{key:"reset",value:function(){this.paused=!1,this.loopControls.resume(),this.pausedSounds=null}},{key:"assetsCache",get:function(){return this._assetsCache}}])&&A(e.prototype,n),t}();function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const _=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(S(this,t),C(this,"_baseOpacity",1),this.domNode=e||r.querySelector(n),!this.domNode)throw new Error("one or more invalid constructor parameters");if(this.domNode.getBoundingClientRect&&(this.x=0,this.y=0,!e)){var o=this.domNode.getBoundingClientRect(),i=o.width,a=o.height;this.width=i,this.height=a}}return k(t,null,[{key:"query",value:function(e,n){return new t(null,e,n)}},{key:"create",value:function(e){return new t(document.createElement(e))}},{key:"bounds",value:function(t){return t.domNode.getBoundingClientRect()}}]),k(t,[{key:"get",value:function(e){return t.query(e,this.domNode)}},{key:"hide",value:function(){this.domNode.style.opacity=0}},{key:"show",value:function(){var t;this.domNode.style.opacity=null!==(t=this._baseOpacity)&&void 0!==t?t:1}},{key:"clear",value:function(){this.content=""}},{key:"on",value:function(t,e){this.domNode.addEventListener(t,e)}},{key:"off",value:function(t,e){this.domNode.removeEventListener(t,e)}},{key:"add",value:function(t){return this.domNode.appendChild(t.domNode||t),this}},{key:"baseOpacity",set:function(t){this._baseOpacity=t}},{key:"classList",get:function(){return this.domNode.classList}},{key:"pos",set:function(t){var e=t.x,n=t.y;e&&(this.x=e,this.domNode.style.left="".concat(e,"px")),n&&(this.y=n,this.domNode.style.top="".concat(n,"px"))}},{key:"content",set:function(t){this.domNode.innerHTML=t}}]),t}();var E=n(915),R=n(379),I=n(146),B=n(529),D="canvas",T="webgl";function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){Y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const N=function(){function t(e){var n=e.cnvQry,r=e.scene,o=e.viewport,i=e.background,a=void 0===i?"#ffffff":i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Y(this,"api",D);var c=document.querySelector(n);this.canvas=c,this.scene=r,this.ctx=c.getContext("2d"),this.changeBackground(a),this.resize(o),o.on("change",this.resize.bind(this))}var e,n;return e=t,(n=[{key:"changeBackground",value:function(t){this.canvas.style.background=t}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.canvas.setAttribute("width",e*I.Z.devicePixelRatio),this.canvas.setAttribute("height",n*I.Z.devicePixelRatio),this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(n,"px")}},{key:"setTexatlas",value:function(t,e){this.img=t,this.meta=e}},{key:"render",value:function(t){switch(this.ctx.translate(t.smooth?t.pos.x:Math.round(t.pos.x),t.smooth?t.pos.y:Math.round(t.pos.y)),t.initialRotation&&(this.ctx.rotate(t.initialRotation),this.ctx.translate(t.initialPivotX,0)),t.anchor&&this.ctx.translate(t.anchor.x,t.anchor.y),t.rotation&&this.ctx.rotate(t.rotation),t.anchor&&this.ctx.translate(-t.anchor.x,-t.anchor.y),t.pivot&&this.ctx.translate(t.pivot.x,t.pivot.y),t.scale&&this.ctx.scale(t.scale.x,t.scale.y),t.type){case E.ey:var e=this.meta[t.frame];this.ctx.drawImage(this.img,e.x,e.y,t.w,t.h,0,0,t.w,t.h);break;case E.hY:this.ctx.drawImage(t.img,0,0);break;case E.JA:t.fill&&(this.ctx.fillStyle=t.fill,this.ctx.fillRect(0,0,t.width,t.height)),t.stroke&&(this.ctx.strokeStyle=t.stroke,this.ctx.lineWidth=t.strokeWidth,this.ctx.strokeRect(0,0,t.width,t.height))}}},{key:"renderRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;if(t._visible){if(t===this.scene&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),t.alpha&&(this.ctx.globalAlpha=t.alpha),t.blendMode&&(this.ctx.globalCompositeOperation=t.blendMode),this.render(t),t.debug){var e=t.hitbox||(0,B.mn)(t);this.ctx.save(),this.render(new R.Z(Z(Z({pos:Z({},e)},e),{},{stroke:"red",strokeWidth:1}))),this.ctx.restore()}if(t.children)for(var n=0,r=t.children.length;n<r;n++)this.renderRecursively(t.children[n]);this.ctx.restore()}}}])&&X(e.prototype,n),t}(),L=function(t,e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Couldn't compile shader: ".concat(t.getShaderInfoLog(r)));return r};var U="undefined"!=typeof Float32Array?Float32Array:Array;function z(){var t=new U(2);return U!=Float32Array&&(t[0]=0,t[1]=0),t}function F(t,e,n){return t[0]=e,t[1]=n,t}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e,n){return e&&q(t.prototype,e),n&&q(t,n),t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),z();var W=function(){function t(){V(this,t),this.tMat=t.create(),this.sMat=t.create(),this.rMat=t.create()}return H(t,null,[{key:"create",value:function(){return t=new U(9),U!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t;var t}},{key:"identity",value:function(t){var e;return(e=t)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,t}}]),H(t,[{key:"scaled",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=t.identity(this.sMat);return r[0]=e,r[4]=n,r}},{key:"rotated",value:function(e){var n=t.identity(this.rMat),r=Math.sin(e),o=Math.cos(e);return n[0]=o,n[1]=r,n[3]=-r,n[4]=o,n}},{key:"translated",value:function(e,n){var r=t.identity(this.tMat);return r[6]=e,r[7]=n,r}}]),t}();const J=function(){function t(){V(this,t),this.iMat=new W,this.temp=W.create(),this.vec=z()}return H(t,[{key:"create",value:function(){return W.create()}},{key:"identity",value:function(t){return W.identity(t)}},{key:"multiply",value:function(t,e){var n=this.temp;n[0]=t[0]*e[0]+t[1]*e[3]+t[2]*e[6],n[1]=t[0]*e[1]+t[1]*e[4]+t[2]*e[7],n[2]=t[0]*e[2]+t[1]*e[5]+t[2]*e[8],n[3]=t[3]*e[0]+t[4]*e[3]+t[5]*e[6],n[4]=t[3]*e[1]+t[4]*e[4]+t[5]*e[7],n[5]=t[3]*e[2]+t[4]*e[5]+t[5]*e[8],n[6]=t[6]*e[0]+t[7]*e[3]+t[8]*e[6],n[7]=t[6]*e[1]+t[7]*e[4]+t[8]*e[7],n[8]=t[6]*e[2]+t[7]*e[5]+t[8]*e[8];for(var r=0;r<9;r++)e[r]=n[r]}},{key:"rotate",value:function(t,e){!function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],c=e[4],s=e[5],u=e[6],l=e[7],f=e[8],h=Math.sin(n),p=Math.cos(n);t[0]=p*r+h*a,t[1]=p*o+h*c,t[2]=p*i+h*s,t[3]=p*a-h*r,t[4]=p*c-h*o,t[5]=p*s-h*i,t[6]=u,t[7]=l,t[8]=f}(t,t,e)}},{key:"scale",value:function(t,e,n){F(this.vec,e,n),function(t,e,n){var r=n[0],o=n[1];t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]}(t,t,this.vec)}},{key:"translate",value:function(t,e,n){F(this.vec,e,n),function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],c=e[4],s=e[5],u=e[6],l=e[7],f=e[8],h=n[0],p=n[1];t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=c,t[5]=s,t[6]=h*r+p*a+u,t[7]=h*o+p*c+l,t[8]=h*i+p*s+f}(t,t,this.vec)}}]),t}();function G(t){return function(t){if(Array.isArray(t))return $(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||K(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=K(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function K(t,e){if(t){if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const nt=function(){function t(e){var n,r=e.image,o=e.cnvQry,i=e.viewport,a=e.scene,c=e.clearColor,s=void 0===c?[0,0,0,0]:c,u=e.background,l=void 0===u?"#000000":u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),et(this,"api",T),et(this,"BATCH_SIZE",125),et(this,"_useOverlay",0),et(this,"texMatCache",{}),et(this,"invCache",{_:{},get:function(t){return this._[t]||(this._[t]=1/t),this._[t]}}),et(this,"instanceData",{mat:[],texMat:[],alpha:[],count:0}),this.canvas=document.querySelector(o),this.gl=function(t){var e=document.querySelector(t).getContext("webgl2");if(!e)throw new Error("Webgl support not available");return e}(o),this.program=this.initProgram(),this.image=r,this.scene=a,this.clearColor=s,this.initBuffers(),this.initUniforms(),this.viewport=i,this.matrixUtil=new J,Object.assign(this,((n={mStack:[]}).mStack.push(W.create()),n.curMatIdx=0,n.curMat=n.mStack[0],n.firstMat=n.mStack[0],n.getCurMat=function(){return this.curMat},n.save=function(){this.curMatIdx+=1,this.mStack[this.curMatIdx]=this.mStack[this.curMatIdx]||W.create(),this.curMat=this.mStack[this.curMatIdx];for(var t=this.mStack[this.curMatIdx-1],e=0;e<9;e++)this.curMat[e]=t[e]},n.restore=function(){if(0===this.curMatIdx)throw new Error("couldn't restore state: no save point could be found");this.curMatIdx-=1,this.curMat=this.mStack[this.curMatIdx]},n)),this.initViewport(i),this.changeBackground(l),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.tex32Array=new Float32Array(9*this.BATCH_SIZE),this.mat32Array=new Float32Array(9*this.BATCH_SIZE),this.alpha32Array=new Float32Array(this.BATCH_SIZE)}var e,n;return e=t,(n=[{key:"get",value:function(){return this._transform}},{key:"initViewport",value:function(t){this.resize(t),t.on("change",this.resize.bind(this))}},{key:"changeBackground",value:function(t,e){this.canvas.setAttribute("style","background-image:url(".concat(e,"); background-color: ").concat(t," !important; width: ").concat(I.Z.viewport.width,"px; height: ").concat(I.Z.viewport.height,";"))}},{key:"translate",value:function(t,e){this.matrixUtil.translate(this.getCurMat(),t,e)}},{key:"rotate",value:function(t){this.matrixUtil.rotate(this.getCurMat(),t)}},{key:"scale",value:function(t,e){this.matrixUtil.scale(this.getCurMat(),t,e)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"resize",value:function(t){var e=t.width,n=t.height,r=Math.round(e*I.Z.devicePixelRatio),o=Math.round(n*I.Z.devicePixelRatio);this.canvas.setAttribute("width",r),this.canvas.setAttribute("height",o),this.gl.viewport(0,0,r,o),this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(n,"px"),this.matrixUtil.identity(this.firstMat),this.matrixUtil.translate(this.firstMat,-1,1),this.matrixUtil.scale(this.firstMat,2/r,-2/o)}},{key:"initProgram",value:function(){var t=this.gl,e=function(t,e,n){var r=t.createProgram();if(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error("Couldnt link shaders: ".concat(t.getProgramInfoLog(r)));return r}(t,L(t,"#version 300 es\nprecision mediump float;\n\nin vec2 vert_pos;\n\nin mat3 instance_mat;      // Transformation matrix\nin mat3 instance_tex_mat;  // Texture matrix\nin float instance_alpha;   // Alpha value\n\nuniform mat3 u_mat;\n\nout vec2 v_texCoord;\nout float v_alpha;\n\nvoid main() {\n    // Apply global transformation and instance transformation\n    mat3 final_mat = u_mat * instance_mat;\n    vec3 pos = final_mat * vec3(vert_pos, 1.0);\n    gl_Position = vec4(pos.xy, 0.0, 1.0);  \n    // Apply texture transformation\n    v_texCoord = (instance_tex_mat * vec3(vert_pos, 1.0)).xy;\n\n    v_alpha = instance_alpha;\n}\n\n",t.VERTEX_SHADER),L(t,"#version 300 es\nprecision highp float;\n\nin vec2 v_texCoord;\nin float v_alpha;\nin vec4 v_debug;\n\nuniform vec3 u_tint;\nuniform sampler2D tex_unit;\nuniform vec3 overlay;\nuniform int use_overlay;\n\nout vec4 fragColor;\n\nvoid main() {\n    vec4 tex_color = texture(tex_unit, v_texCoord);\n    \n    // Apply tint\n    vec3 tinted_color = tex_color.xyz + u_tint;\n    \n    // Apply overlay\n    vec3 finalColor = use_overlay == 0 ? tinted_color: overlay;\n    \n    // Set final color with alpha\n    fragColor = vec4(finalColor, tex_color.a * v_alpha);\n}\n",t.FRAGMENT_SHADER));return t.useProgram(e),e}},{key:"initUniforms",value:function(){var t=this.gl;this.uMat=t.getUniformLocation(this.program,"u_mat"),this.uTint=t.getUniformLocation(this.program,"u_tint"),this.uOverlay=t.getUniformLocation(this.program,"overlay"),this.uUseOverlay=t.getUniformLocation(this.program,"use_overlay"),this.transform=W.create(),this.tint=[0,0,0],this.gl.uniform1i(this.uUseOverlay,0),this.gl.uniform3fv(this.uOverlay,[0,0,0])}},{key:"initBuffers",value:function(){var t=this.gl;this.vao=t.createVertexArray(),t.bindVertexArray(this.vao);var e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),t.STATIC_DRAW);var n=t.getAttribLocation(this.program,"vert_pos");t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0);var r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,0,t.DYNAMIC_DRAW);for(var o=[t.getAttribLocation(this.program,"instance_mat"),t.getAttribLocation(this.program,"instance_mat")+1,t.getAttribLocation(this.program,"instance_mat")+2],i=0;i<3;i++)t.enableVertexAttribArray(o[i]),t.vertexAttribPointer(o[i],3,t.FLOAT,!1,36,3*i*4),t.vertexAttribDivisor(o[i],1);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,0,t.DYNAMIC_DRAW);for(var c=[t.getAttribLocation(this.program,"instance_tex_mat"),t.getAttribLocation(this.program,"instance_tex_mat")+1,t.getAttribLocation(this.program,"instance_tex_mat")+2],s=0;s<3;s++)t.enableVertexAttribArray(c[s]),t.vertexAttribPointer(c[s],3,t.FLOAT,!1,36,3*s*4),t.vertexAttribDivisor(c[s],1);var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,0,t.DYNAMIC_DRAW);var l=t.getAttribLocation(this.program,"instance_alpha");t.enableVertexAttribArray(l),t.vertexAttribPointer(l,1,t.FLOAT,!1,0,0),t.vertexAttribDivisor(l,1),t.bindVertexArray(null),this.instanceBuffers={instanceMatBuffer:r,instanceTexMatBuffer:a,instanceAlphaBuffer:u}}},{key:"setOverlay",value:function(t){t.overlay&&(this.flushBatch(),this.gl.uniform1i(this.uUseOverlay,1),this.gl.uniform3fv(this.uOverlay,t.overlay))}},{key:"resetOverlay",value:function(t){t.overlay&&(this.flushBatch(),this.gl.uniform1i(this.uUseOverlay,0))}},{key:"renderRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;if(t._visible){if(t===this.scene&&(this.invisibleCount=0,this.clear()),this.save(),this.setOverlay(t),this.collectInstanceData(t),this.instanceData.count>this.BATCH_SIZE-1&&this.flushBatch(),t.children){var e,n=Q(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.renderRecursively(r)}}catch(t){n.e(t)}finally{n.f()}}this.resetOverlay(t),this.restore(),t===this.scene&&this.flushBatch()}}},{key:"flushBatch",value:function(){0!==this.instanceData.count&&(this.uploadInstanceData(),this.drawInstances(this.instanceData.count),this.clearInstanceData())}},{key:"collectInstanceData",value:function(t){var e,n;if(this.translate(t.smooth?t.pos.x:Math.floor(t.pos.x),t.smooth?t.pos.y:Math.floor(t.pos.y)),t.initialRotation&&(this.rotate(t.initialRotation),this.translate(t.initialPivotX,0)),t.rotation&&(t.anchor&&this.translate(t.anchor.x,t.anchor.y),this.rotate(t.rotation),t.anchor&&this.translate(-t.anchor.x,-t.anchor.y)),t.scale&&this.scale(t.scale.x,t.scale.y),t.frame){var r=this.meta[t.frame],o=t.w,i=t.h;if(!this.texMatCache[t.frame]){var a=this.matrixUtil.create(),c=r.x,s=r.y;this.matrixUtil.translate(a,c/this.image.width,s/this.image.height),this.matrixUtil.scale(a,o/this.image.width,i/this.image.height),this.texMatCache[t.frame]=a}this.scale(o,i),(e=this.instanceData.mat).push.apply(e,G(this.getCurMat())),(n=this.instanceData.texMat).push.apply(n,G(this.texMatCache[t.frame])),this.instanceData.alpha.push(void 0!==t.alpha?t.alpha:1),this.instanceData.count+=1,t.children&&this.scale(this.invCache.get(o),this.invCache.get(i))}}},{key:"setTexatlas",value:function(t,e){var n=this.gl,r=n.createTexture(),o=n.getUniformLocation(this.program,"tex_unit");this.meta=e,this.image=t,n.activeTexture(n.TEXTURE0+0),n.uniform1i(o,0),n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.generateMipmap(n.TEXTURE_2D)}},{key:"uploadInstanceData",value:function(){var t=this.gl;this.mat32Array.set(this.instanceData.mat),this.tex32Array.set(this.instanceData.texMat),this.alpha32Array.set(this.instanceData.alpha),t.bindBuffer(t.ARRAY_BUFFER,this.instanceBuffers.instanceMatBuffer),t.bufferData(t.ARRAY_BUFFER,this.mat32Array,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.instanceBuffers.instanceTexMatBuffer),t.bufferData(t.ARRAY_BUFFER,this.tex32Array,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.instanceBuffers.instanceAlphaBuffer),t.bufferData(t.ARRAY_BUFFER,this.alpha32Array,t.DYNAMIC_DRAW)}},{key:"drawInstances",value:function(t){var e=this.gl;e.bindVertexArray(this.vao),e.drawArraysInstanced(e.TRIANGLES,0,6,t),e.bindVertexArray(null)}},{key:"clearInstanceData",value:function(){var t=this.instanceData,e=t.mat,n=t.texMat,r=t.alpha;e.length=0,n.length=0,r.length=0,this.instanceData.count=0}},{key:"clearColor",set:function(t){var e;(e=this.gl).clearColor.apply(e,G(t))}},{key:"transform",set:function(t){this.gl.uniformMatrix3fv(this.uMat,!1,t),this._transform=t}},{key:"tint",set:function(t){this.gl.uniform3fv(this.uTint,t),this._tint=t},get:function(){return this._tint}}])&&tt(e.prototype,n),t}();var rt=n(32),ot=n(282),it=["Engaging quasar splitter","Activating nebula siphon","Calibrating wormhole compass","Initializing dimension shifter","Aligning gravity inverter","Forming stasis bubble","Starting time loop engine","Charging antigrav boots","Securing cosmic anchor","Crafting molecular disruptor","Energizing chrono-blade","Heating stellar forge","Mapping galactic ley lines","Tuning void resonator","Boosting psi-amplifier","Connecting neural nexus","Powering up plasma gauntlet","Generating rift stabilizer","Activating singularity coil","Deploying dimensional anchor","Calibrating etheric transponder","Linking quantum entangler","Deploying chrono-shield","Aligning warp stabilizer","Starting infinity drive","Spinning vortex manipulator","Broadcasting subspace transmitter","Calibrating tachyon inverter","Preparing null field generator","Activating chrono key","Starting ether drive","Firing vortex cannon","Harvesting solar energy","Initializing chaos matrix","Navigating stellar map","Sharpening void blade","Charging neutron lance","Sequencing spacetime","Locking quantum cipher","Disrupting phase field","Projecting astral form","Inverting entropy flow","Anchoring reality","Prisming stellar light","Forging nebula","Decrypting quantum cipher","Charging void capacitor","Incubating alien spider eggs","Harnessing vortigaunt energy","Crystallizing light saber crystals","Deciphering scroll of doom","Charging quantum flux capacitor","Mobilizing zombie horde","Translating ancient runes","Opening mystic portal","Resolving time-travel paradox","Charging photon blaster","Creating gravity well","Calculating wormhole coordinates","Charting celestial map","Casting arcane spells","Engaging stealth module","Generating dark matter","Activating cryo-chamber","Simulating holo-deck","Deploying plasma shield","Starting fusion reactor","Installing cybernetic implants","Extracting alien DNA","Charging warp drive","Activating cloaking device","Harnessing void energy","Linking teleportation grid","Opening dimension rift","Decrypting nuclear launch codes","Computing telekinetic algorithms","Charging psi-blade","Harvesting nebula dust","Generating shield","Activating interstellar beacon","Upgrading exosuit","Deploying nanobot swarm","Firing antimatter cannon","Activating cryogenic stasis","Preparing solar flares","Commanding galactic empire","Firing orbital lasers","Tapping tesseract energy","Synchronizing AI consciousness","Detecting paranormal activity","Stabilizing space-time continuum","Interpreting ancient prophecy","Reinforcing digital firewall","Containing viral outbreak","Suppressing robotic uprising","Activating cloning facility","Engaging invisibility cloak","Calculating chaos theory","Monitoring supernova explosion","Deploying combat drones","Charging plasma rifle","Activating planetary defense system","Analyzing alien artifact","Investigating black hole anomaly","Initializing holographic interface","Entangling quantum particles"].map((function(t){return t.toLowerCase()})),at=0;const ct=function(){return at=(at+1)%it.length,it[at]};var st;function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lt=b.loadResource,ft=Object.freeze({SOUND:"SOUND",IMAGE:"IMAGE",DATA:"DATA"}),ht=(ut(st={},ft.SOUND,lt),ut(st,ft.IMAGE,(function(t){return new Promise((function(e,n){var r=new Image;r.src=t,r.onload=function(){return e(r)},r.onerror=function(){return n({message:u})}}))})),ut(st,ft.DATA,(function(t){return new Promise((function(e,n){fetch(t).then((function(t){return t.json()})).then((function(t){return e(t)})).catch((function(t){return n({message:u})}))}))})),st);function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bt(t,e){return!e||"object"!==pt(e)&&"function"!=typeof e?vt(t):e}function vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gt(r);if(o){var n=gt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return bt(this,t)});function a(){var t,e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r={},(n="assets")in(e=vt(t=i.call(this,["prog","prog-end","load","error"])))?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return e=a,(n=[{key:"load",value:function(t){var e,n=this,r=t.length,o=Promise.resolve(),i=.01;!function t(){i+=Math.floor(2*Math.random())/200,n.emit("prog",Math.min(100,i),ct()),e=setTimeout(t,250+(0,rt.Q2)(1600))}(),t.reduce((function(t,e,o){return t.then((function(){var t="string"==typeof e?e:e.url;return function(t){var e=function(t){return t.match(/.(jpe?g)|(png)$/)?ft.IMAGE:t.match(/.(mp3)|(wav)|(ogg)$/)?ft.SOUND:t.match(/.(cson|bson)$/)?ft.DATA:void 0}(t);return(0,ht[e])(t)}(t).then((function(e){n.assets[t]=e,i=(o+1)/r,n.emit("prog",i,ct())}))}))}),o).then((function(){n.emit("prog-end"),n.emit("load"),n.off("prog"),clearTimeout(e)})).catch((function(t){n.emit("error",t),clearTimeout(e)}))}},{key:"unload",value:function(t){this.assets[t]=null}},{key:"get",value:function(t){return this.assets[t]}}])&&yt(e.prototype,n),a}(ot.Z);var wt=n(739);function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xt(t,e){return(xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jt(t,e){return!e||"object"!==Ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pt=function(t,e){var n=Number(t);if(0!==n&&!n)throw new Error("Attempting to set invalid ".concat(e,": ").concat(t));return n};const kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=St(r);if(o){var n=St(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return jt(this,t)});function a(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,["orb-update","music-update","sound-update"])).strat=t;var n=t.get();return e.data=n?JSON.parse(n):{curLevel:1,orbCount:6,hiscores:{},music:!0,sound:!0},e}return e=a,(n=[{key:"setNum",value:function(t,e){var n=Pt(e,t);return this.data[t]=n,this.save(this.data),n}},{key:"setCurLevel",value:function(t){this.setNum("curLevel",t)}},{key:"setOrbCount",value:function(t){var e=this.setNum("orbCount",t);this.emit("orb-update",e)}},{key:"setHiscore",value:function(t,e){var n=Pt(e,"hiscore");this.data.hiscores[String(t)]=n,this.save(this.data)}},{key:"getCurLevel",value:function(){return this.data.curLevel}},{key:"getOrbCount",value:function(){return this.data.orbCount}},{key:"getHiscore",value:function(t){return this.data.hiscores[String(t)]}},{key:"getMusic",value:function(){return this.data.music}},{key:"setMusic",value:function(t){this.data.music=t,this.emit("music-update",this.data.music),this.save(this.data)}},{key:"getSound",value:function(){return this.data.sound}},{key:"setSound",value:function(t){this.data.sound=t,this.emit("sound-update",this.data.sound),this.save(this.data)}},{key:"save",value:function(t){this.strat.set(JSON.stringify(t))}}])&&At(e.prototype,n),a}(ot.Z);function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Et=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_t(this,"periodBetweenAds",45e3),_t(this,"adLastPlayedAt",Date.now()-45e3),this.strat=e}var e,n;return e=t,(n=[{key:"rvaSupported",value:function(){return!!this.strat&&this.strat.rva}},{key:"setLoadProg",value:function(t){this.strat&&this.strat.setLoadProg(t)}},{key:"signalLoad",value:function(){return this.strat?this.strat.signalLoad():Promise.resolve()}},{key:"playRva",value:function(){return this.strat?(this.adLastPlayedAt=Date.now(),this.strat.playRva()):Promise.reject()}},{key:"canPlay",value:function(){return Date.now()-this.adLastPlayedAt<this.periodBetweenAds}},{key:"playIntstAd",value:function(){return!this.strat||this.canPlay()?(console.log("Ad throttled: interstitial ad frequency exceeded"),Promise.reject()):(this.adLastPlayedAt=Date.now(),this.strat.playIntstAd())}},{key:"prerollAd",value:function(){return this.strat?(this.adLastPlayedAt=Date.now(),this.strat.prerollAd()):Promise.reject()}},{key:"setOnPause",value:function(t){this.strat&&this.strat.setOnPause(t)}},{key:"setOnResume",value:function(t){this.strat&&this.strat.setOnResume(t)}}])&&Ct(e.prototype,n),t}();var Rt=n(911),It=n.n(Rt),Bt=n(582),Dt=n.n(Bt),Tt=n(942),Mt=n.n(Tt),Zt=n(559),Xt=n.n(Zt),Yt=n(867),Nt=n.n(Yt),Lt=n(671),Ut=n.n(Lt),zt=n(799),Ft=n.n(zt),Vt=n(235),qt=n.n(Vt),Ht=n(818),Wt=n.n(Ht),Jt=n(508),Gt=n.n(Jt),Qt=n(579),Kt=n.n(Qt),$t=n(184),te=n.n($t);const ee=[{id:Mt(),music:"music1"},{id:Xt(),bgPos:"15% 75w%"},{id:Nt()},{id:Ut(),music:"music1"},{id:Ft(),music:""},{id:qt(),music:"music1",bgPos:"-50%"},{id:Wt(),bgPos:"40% 80%"},{id:Gt(),music:"",bgPos:"40% 32%"},{id:Kt(),music:"music1",bgPos:"75% 30%"},{id:te(),music:"",bgPos:"40% 80%"},{id:It(),music:"",bgPos:"0% 0%"}];var ne="LOADING",re="MAIN_MENU",oe="LEVEL",ie="GAME",ae=n(994),ce=n.n(ae),se=n(673);ce()(se.Z,{insert:"head",singleton:!1});const ue=se.Z.locals||{};var le={width:150,height:25},fe="info",he="prog-bar",pe="prog-ind";const ye=function(t){var e,n;t.content=(e=fe,n="msg","\n        ".concat(function(t,e,n,r){return'\n        <div id="'.concat("prog-bar",'" class="').concat(ue.bar,'" style="width: ').concat(t,"px; height: ").concat(e,'px; background: #ffe6d5; z-index: 99999;">\n        </div>\n        <div id="').concat("prog-ind",'" class="').concat(ue.bar,'" style="width: 4px; height: ').concat(e,'px; background: tomato; z-index: 100000;">\n        </div>\n    ')}(le.width,le.height),'\n        <div id="').concat(e,'" class="').concat(ue.txt," ").concat(ue.info,'"></div>\n        <div id="').concat(n,'" class="').concat(ue.txt," ").concat(ue.info,'"></div>\n    '));var r=t.get("#".concat(he)),o=t.get("#".concat(pe)),i=t.get("#".concat(fe)),a=t.get("#".concat("msg")),c=function(t){r.pos=(0,B.qj)(t,le,"center","center"),o.pos=(0,B.qj)(t,le,"center","center"),i.pos=(0,B.EJ)(r,_.bounds(i),"bottom",0,20),a.pos=(0,B.EJ)(r,_.bounds(a),"bottom",0,50)};return I.Z.viewport.on("change",c),c(I.Z.viewport),{teardown:function(){I.Z.viewport.off("change",c),t.clear()},onProg:function(t,e){o.domNode.style.width="".concat(Math.round(t*le.width),"px"),i.content="".concat(Math.round(100*t),"%"),a.content=e,c(I.Z.viewport)},onError:function(t){console.log(t),i.content=t&&t.message===u?"Error: something went wrong":"Error: Unsupported Device",i.domNode.style.color="#d34545",a.content="",c(I.Z.viewport)},onLoad:function(){t.clear()}}};function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ge(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?me(t):e}function me(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function we(t){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=we(r);if(o){var n=we(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ge(this,t)});function a(t){var e,n,r,o,c=t.game,s=t.assets,u=t.uiRoot,l=t.sdk;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o="#000000",(r="background")in(n=me(e=i.call(this)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,e.game=c,e.assets=s,e.uiRoot=u,e.sdk=l,e}return e=a,(n=[{key:"onEnter",value:function(){var t=this,e=this.game.assetsCache;e.load(this.assets);var n=ye(this.uiRoot),r=n.teardown,o=n.onProg,i=n.onError;n.onLoad,this.teardown=r,this.onProg=o,e.once("load",(function(){var e=function(){I.Z.testMode?t.game.switchScreen(ie,0):t.game.switchScreen(re)};t.sdk.signalLoad().then(e).catch(e)})),e.on("prog",(function(e,n){o(e,n),t.sdk.setLoadProg(Math.round(100*e))})),e.once("error",i)}},{key:"onExit",value:function(){this.game.disposeScreen(this),this.game.assetsCache.off("prog",this.onProg),this.game.assetsCache.off("error"),this.teardown()}}])&&be(e.prototype,n),a}(t.Z);function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function je(t,e){return(je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Se(t,e){return!e||"object"!==Ae(e)&&"function"!=typeof e?Pe(t):e}function Pe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ce=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&je(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ke(r);if(o){var n=ke(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Se(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).logo=new wt.Z({frame:"logo"}),t.rock1=new wt.Z({frame:"rock1"}),t.rock2=new wt.Z({frame:"rock2"}),t.ball=new wt.Z({frame:"ball"}),t.add(t.rock1),t.add(t.rock2),t.add(t.ball),t.add(t.logo),t.ball.pos.x=88,t.ball.pos.y=80,t.rock1.pos.x=200,t.rock2.pos.y+=t.rock2.h/2,t.ball.anchor={x:.75*t.ball.w,y:t.ball.h/2},t.ball.rotation=0,t.alpha=1,Object.assign(Pe(t),(0,B.vD)(Pe(t))),t}return e=a,(n=[{key:"update",value:function(t){this.ball.rotation+=t*Math.PI/12,this.alpha=Math.min(1,this.alpha+.5*t)}}])&&xe(e.prototype,n),a}(t.Z);var _e=n(731);ce()(_e.Z,{insert:"head",singleton:!1});const Ee=_e.Z.locals||{},Re=function(t,e){return'\n        <div id="'.concat(t,'" class="').concat(Ee.playBtn,'">').concat(e,"</div>\n    ")};var Ie="play-btn";var Be=n(343),De=n.n(Be),Te=n(102),Me=n.n(Te),Ze=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[.03529411764705882,.03529411764705882,.03529411764705882],o=arguments.length>3?arguments[3]:void 0;if("webgl"===o){var i=n.get(Me());e.container=new t.Z,e.add(e.container),i.forEach((function(t){e.container.add(new wt.Z({frame:t.name,pos:{x:t.x,y:t.y}}))}));var a=n.get(De()),c=i.reduce((function(t,e){return Math.min(t,e.y)}),1/0),s=i.reduce((function(t,e){return Math.max(t,e.y+a[e.name].height)}),0),u=s-c;e.container.overlay=r;var l=function(){e.container&&(e.container.pos.y=-c+(I.Z.viewport.height*I.Z.devicePixelRatio-u))};return l(),I.Z.viewport.on("change",l),function(){I.Z.viewport.off("change",l)}}};function Xe(t){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Le(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Ue(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ze(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qe(t,e){return!e||"object"!==Xe(e)&&"function"!=typeof e?He(t):e}function He(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function We(t){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Je=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}(u,e);var n,r,o,a,c=(o=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=We(o);if(a){var n=We(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return qe(this,t)});function u(e){var n,r=e.player,o=e.data,a=e.factories,l=void 0===a?{}:a,f=Le(e,["player","data","factories"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n=c.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(n),!0).forEach((function(e){Ne(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},f));var h=!1,p=new t.Z({id:i}),y=new t.Z({id:s}),d=new t.Z,b=new t.Z,v={mg:d,world:y,fg:b},g=function(e){var n=t.Z.get(e);if(!n){var r=new t.Z({id:e});return this.add(r),r}return n};y.getGroup=g,d.getGroup=g,b.getGroup=g;var m=function(t,e){var o=v[e];t.forEach((function(t){var e=t.name,i=t.x,a=t.y,c=t.groupId,s=Le(t,["name","x","y","groupId"]),u=l[e];if(u)(c?o.getGroup(c):o).add(u(i,a,s,r));else{var f=new wt.Z({frame:e,pos:{x:i,y:a}});(c?o.getGroup(c):He(n)).add(f)}}))},w=function(t){var e=t.x,n=t.y,o=t.groupId,i=t.layer,a=void 0===i?"w":i,c=Le(t,["x","y","groupId","layer"]),s=c.name;if(("player"!==s||!c.temp||I.Z.testMode)&&("player"!==s||!I.Z.testMode||c.temp)&&("player"!==s||!h)){"player"===s&&(h=!0);var u=l[s]?l[s]:l.default,f="mg"===a?d:"fg"===a?b:y;(o?f.getGroup(o):f).add(u(e,n,c,r))}};return o.collisionRects.forEach((function(e){var n=e.x,r=e.y,o=e.width,i=e.height,a=Le(e,["x","y","width","height"]),c=new t.Z({pos:{x:n,y:r}});c.width=o,c.height=i,Object.assign(c,a),p.add(c)})),y.add(p),m(o.mgTiles,"mg"),n.add(d),m(o.tiles,"world"),n.add(y),o.spawnPoints.forEach(w),m(o.fgTiles,"fg"),n.add(b),n.width=o.width,n.height=o.height,I.Z.testMode?(o.tempSpawnPoints.filter((function(t){return"checkpoint"===t.name})).concat(o.checkpoints).forEach((function(t){b.add(new R.Z({width:64,height:64,fill:"white",pos:{x:t.x,y:t.y},alpha:.5}))})),o.tempSpawnPoints.forEach((function(t){"checkpoint"!==t.name&&w(t)})),Array.isArray(o.previewColRects)&&o.previewColRects.forEach((function(t){for(var e=t.x,n=t.y,r=t.w,o=t.h,i=0;i<r;i++)for(var a=0;a<o;a++){var c=new wt.Z({pos:{x:48*(e+i),y:48*(n+a)},frame:"wtr_g",alpha:.5});b.add(c)}})),I.Z.debug?(o.collisionRects.forEach((function(t){var e=t.x,n=t.y,r=t.width,o=t.height;b.add(new R.Z({width:r,height:o,pos:{x:e,y:n},alpha:.125,fill:"#aaa"}))})),n):qe(n)):qe(n)}return n=u,(r=[{key:"resetRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(t.reset&&t.reset(),t.children){var e,n=Ue(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.resetRecursively(r)}}catch(t){n.e(t)}finally{n.f()}}}}])&&Fe(n.prototype,r),u}(t.Z);var Ge=n(716),Qe=n.n(Ge);function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$e(Object(n),!0).forEach((function(e){cn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function en(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rn(t,e){return!e||"object"!==Ke(e)&&"function"!=typeof e?on(t):e}function on(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function an(t){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const sn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=an(r);if(o){var n=an(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return rn(this,t)});function a(t){var e,n=t.game,r=t.uiRoot,o=t.sdk;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),cn(on(e=i.call(this)),"background","rgb(17, 34, 55)"),e.game=n,e.uiRoot=r,e.sdk=o,n.assetsCache.once("load",(function(){var t=I.Z.viewport,r=n.assetsCache.get(Dt());e.gameTitle=new Ce;var o=new Je({player:{},data:r,scale:{x:.5,y:.5},factories:{default:function(t,e,n){return new wt.Z({pos:{x:t,y:e},frame:n.name})}}});n.renderer.tint=[.01,-.01,-.005],e.graphic=o,e.realign=function(t){var n=I.Z.devicePixelRatio;e.gameTitle.pos=tn({},(0,B.qj)({x:0,y:0,width:t.width*n,height:t.height*n},{width:e.gameTitle.width,height:e.gameTitle.height},"center","top",15,80)),o.pos=tn({},(0,B.qj)({x:0,y:0,width:t.width*n,height:t.height*n},{width:r.width/2,height:r.height/2},"center","top",15,80)),o.pos.y=210},t.on("change",e.realign),e.realign(t),e.teardownBg=Ze(on(e),n.assetsCache,[.033203125,.06640625,.107421875],n.renderer.api),e.add(o),e.add(e.gameTitle),e.init()})),e}return e=a,(n=[{key:"init",value:function(){var t=this.graphic,e=this.gameTitle;this.initPositions={graphic:{x:t.pos.x,y:t.pos.y},gameTitle:{x:e.pos.x,y:e.pos.y}},t.smooth=!1,t.gameTitle=!1,this.frequency=1.75,this.amplitude=24,this.parallaxFactor=.4;var n=.05*Math.PI,r=.9*Math.PI,o=Math.cos(n)*this.amplitude,i=Math.cos(r)*this.amplitude;this.yMin=Math.min(o,i),this.yMax=Math.max(o,i);var a=Math.cos(n)*this.amplitude,c=Math.cos(r)*this.amplitude;this.xMin=Math.min(a,c),this.xMax=Math.max(a,c)}},{key:"update",value:function(t,e){var n=this.graphic,r=this.gameTitle,o=this.yMin,i=this.yMax,a=this.amplitude,c=this.frequency,s=this.parallaxFactor;if(n&&r){var u=e*c;r.pos.y=this.initPositions.gameTitle.y+(0,rt.uZ)(o*s*a,i/s,Math.cos(u)*a),n.pos.y=this.initPositions.graphic.y+(0,rt.uZ)(o*a,i*a,Math.cos(u)*a*s)}}},{key:"onEnter",value:function(){var t=this.uiRoot,e=this.game,n=this.sdk;this.teardownUI=function(t){var e=t.uiRoot,n=t.onPlay;e.content=Re(Ie,"PLAY");var r=e.get("#".concat(Ie)),o=function(t){r.pos=(0,B.qj)(t,r,"center","center",0,0)};return r.on("click",n),I.Z.viewport.on("change",o),o(I.Z.viewport),function(){r.off("click",n),e.clear(),I.Z.viewport.off("change",o)}}({uiRoot:t,onPlay:function(){var r=function(){return e.switchScreen(oe,!0)};if(t.clear(),!I.Z.prerollAd)return r();n.prerollAd().then(r).catch(r)}}),e.renderer.changeBackground(this.background,Qe()),this.game.renderer.canvas.style.backgroundPosition="40% 25%",this.game.renderer.canvas.style.backgroundOpacity=1}},{key:"onExit",value:function(){this.teardownUI(),I.Z.viewport.off("change",this.realign),this.teardownBg(),this.game.assetsCache.unload(Dt()),this.game.disposeScreen(this)}}])&&en(e.prototype,n),a}(t.Z);var un=n(232);function ln(t){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fn(Object(n),!0).forEach((function(e){mn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yn(t,e,n){return(yn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function dn(t,e){return(dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bn(t,e){return!e||"object"!==ln(e)&&"function"!=typeof e?vn(t):e}function vn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gn(t){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const wn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dn(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gn(r);if(o){var n=gn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return bn(this,t)});function a(t){var e,n=t.entYOffset,r=void 0===n?0:n,o=t.tiles,c=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["entYOffset","tiles"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),mn(vn(e=i.call(this,hn({},c))),"_layoutTiles",(function(){})),mn(vn(e),"_tiles",null),e.entYOffset=r,e.tiles=o,e.prevPos={x:0,y:0},e}return e=a,(n=[{key:"setWorld",value:function(t){var e=this,n=t.worldWidth,r=t.worldHeight,o=Math.min(r-this.baseline,(this.bounds.height-this.subject.height)/2),i=this.baseline-this.subject.height/2,a=(0,rt.uZ)(0,r-this.bounds.height,i-this.bounds.height/2)*this.pF+this.bounds.height-o,c=o*(1-1/this.z);this.world.width=n,this.world.height=r,this.tiles.forEach((function(t){var n=hn({},t);n.pos={x:t.pos.x,y:a+c-(e.baseline-t.pos.y)+e.entYOffset},e.add(n)}))}},{key:"layoutTiles",value:function(t){var e=this,n=t.width,r=void 0===n?this.world.width:n,o=t.height,i=void 0===o?this.world.height:o,a=t.tiles,c=void 0===a?this.tiles:a;if(i===this.world.height&&c===this.tiles)return this.world.width=r;c!==this.tiles&&(this.tiles=c),this.viewport.off("change",this._layoutTiles),this._layoutTiles=function(){e.children=[],e.setWorld({worldWidth:r,worldHeight:i})},this.viewport.on("change",this._layoutTiles),this._layoutTiles()}},{key:"onRemove",value:function(){yn(gn(a.prototype),"onRemove",this).call(this),this.viewport.off("change",this._layoutTiles)}},{key:"tiles",get:function(){return this._tiles},set:function(t){t&&(this._tiles=t,this.baseline=t.reduce((function(t,e){return Math.max(t,e.pos.y+e.height)}),0))}}])&&pn(e.prototype,n),a}(un.Z);function On(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const An=function(){function t(e){var n=e.resource,r=e.start,o=e.duration,i=e.size,a=void 0===i?1:i,c=e.loop,s=e.volume,u=e.pan,l=e.speed;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resource=n,this.start=r,this.duration=o,this.instances=Array(a).fill(new b(n,{loop:c,volume:s,pan:u,speed:l}))}var e,n;return e=t,(n=[{key:"play",value:function(t){var e=function(t){for(var e=t.length-1;e>-1;e--)if(!t[e].playing)return t[e]}(this.instances);if(e)e.play(this.start,this.duration,t);else{var n=new b(this.resource);this.instances.push(n),n.play(this.start,this.duration,t)}}},{key:"pause",value:function(){this.instances.forEach((function(t){t.pause()}))}},{key:"resume",value:function(){this.instances.forEach((function(t){t.resume()}))}}])&&On(e.prototype,n),t}();function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const jn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mutations=e,this.accessIdx=0}var e,n;return e=t,(n=[{key:"play",value:function(t){var e=this.mutations,n=this.accessIdx;e[n].play(t),this.accessIdx=(n+1)%e.length}},{key:"pause",value:function(){this.mutations((function(t){t.pause()}))}},{key:"resume",value:function(){this.mutations((function(t){t.resume()}))}}])&&xn(e.prototype,n),t}();function Sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sn(Object(n),!0).forEach((function(e){kn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const _n=function(){function t(e){var n=e.resource,r=e.resourceID,o=e.meta;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("Null audio resource: ".concat(r));this.meta=o,this.resource=n}var e,n;return e=t,(n=[{key:"create",value:function(t,e){var n=this.meta,r=this.resource,o=new b(r,e);return o.play=o.play.bind(o,n[t].start,n[t].duration),o}},{key:"createPool",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new An(Pn(Pn({resource:this.resource},this.meta[t]),e));return n}},{key:"createGroup",value:function(t,e){var n=this,r=t.map((function(t){return n.createPool(t,e)}));return new jn(r)}}])&&Cn(e.prototype,n),t}();function En(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"makeMovable",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.velX,r=void 0===n?0:n,o=e.velY,i=void 0===o?0:o,a=e.accX,c=e.accY,s=e.fricX,u=e.fricY,l=e.roll;Object.assign(t,{movable:!0,velX:r,velY:i,accX:a,accY:c,fricX:s,fricY:u,roll:l}),l&&(t.rotation=0)}},{key:"updateOffEdge",value:function(t,e){var n=t.offCorner;n.movable&&(t.pos.x+=n.pos.x-n.prevPosX,t.pos.y+=n.pos.y-n.prevPosY);var r=(0,B.Uz)(t),o=(0,B.SF)(n),i=o.x+(1===t.offEdge?o.width:0),s=(i-(r.x+r.radius))/r.radius,u=(o.y-(r.y+r.radius))/r.radius,l=u,f=-s,h=(0,rt.z4)(u,s);t.fricX&&(t.velX-=t.fricX*t.velX*e/2);var p=(t.velX*l+20*f)*e/r.radius,y=h+p;switch(t.offEdge){case-1:var d=y>Math.PI/2,b=y<a;(d||b)&&(t.offEdge=0,t.velX*=1.5),b&&(t.velX=-50),d&&(t.pos.y-=.5);break;case 1:var v=y<Math.PI/2;if(v||y>c)return t.offEdge=0,!v&&(t.velX=50),v&&(t.velX*=1.5),v&&(t.pos.y-=.5)}var g=r.radius*(1+Math.cos(y)),m=r.radius*(1+Math.sin(y)),w=t.pos.x;(0,B.uF)(t,i-g),Math.abs(w-t.pos.x),(0,B.aZ)(t,o.y-m),t.rotation+=p}},{key:"update",value:function(t,e){t.accX&&(t.velX+=t.accX*e/2),t.accY&&(t.velY+=t.accY*e/2),t.fricX&&(t.velX+=-t.fricX*t.velX*e/2),t.fricY&&(t.velY*=e/t.fricY),t.roll&&(t.rotation+=t.velX*e/(2*t.radius)),t.pos.x+=t.velX*e,t.pos.y+=t.velY*e}}],null&&En(e.prototype,null),n&&En(e,n),t}();function In(t){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bn(Object(n),!0).forEach((function(e){Tn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xn(t,e,n){return e&&Zn(t.prototype,e),n&&Zn(t,n),t}function Yn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ln(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fn(t);if(e){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Un(this,n)}}function Un(t,e){return!e||"object"!==In(e)&&"function"!=typeof e?zn(t):e}function zn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vn=function(t){Yn(n,t);var e=Ln(n);function n(t){var r,o=t.imgId,i=t.metaId,a=t.frame,c=t.pos,s=t.lifetime,u=t.velX,l=void 0===u?0:u,f=t.velY,h=void 0===f?0:f,p=t.accX,y=t.accY,d=t.alpha,b=t.alphaDecayFn,v=t.rotVel,g=t.loop;return Mn(this,n),(r=e.call(this,{imgId:o,metaId:i,frame:a,pos:c})).lifetime=s,r.velX0=l,r.velY0=h,r.alpha0=d,r.pos0=Dn({},c),r.alpha=d,r.alphaDecayFn=b,r.elapsed=0,r.loop=g,v&&(r.rotVel=v,r.rotation=0,r.anchor={x:r.w/2,y:r.h/2}),Rn.makeMovable(zn(r),{velX:l,velY:h,accX:p,accY:y}),r}return Xn(n,[{key:"_reset",value:function(){this.elapsed=0,this.velX=this.velX0,this.velY=this.velY0,this.alpha=this.alpha0,this.pos.x=this.pos0.x,this.pos.y=this.pos0.y,this.rotVel&&(this.rotation=0)}},{key:"update",value:function(t){if(this.elapsed>this.lifetime){if(!this.loop)return;this._reset()}this.elapsed+=t,Rn.update(this,t),this.rotVel&&(this.rotation+=this.rotVel*t),this.alphaDecayFn&&(this.alpha=Math.max(.01,1-rt.bh[this.alphaDecayFn](this.elapsed/this.lifetime)))}}]),n}(wt.Z);const qn=function(t){Yn(n,t);var e=Ln(n);function n(t){var r,o,i=t.size,a=t.blendMode,c=t.loop,s=void 0!==c&&c,u=t.randomDistribution,l=void 0===u||u,f=t.metaId,h=t.imgId,p=t.params,y=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["size","blendMode","loop","randomDistribution","metaId","imgId","params"]);if(Mn(this,n),(r=e.call(this,Dn({},y))).blendMode=a,l)o=p.reduce((function(t,e,n){return t.concat(Array(e.weight||1).fill(n))}),[]);else{var d=p.reduce((function(t,e){return t+(e.weight||1)}),0);o=p.reduce((function(t,e,n){return t.concat(Array(Math.round(i*(e.weight||1)/d)).fill(n))}),[])}for(var b=0;b<i;b++){var v=p[l?(0,rt.d4)(o):o[b]],g={metaId:f,imgId:h,frame:v.frame,pos:{x:Array.isArray(v.offsetX)?(0,rt.TN)(v.offsetX[0],v.offsetX[1]):v.offsetX||0,y:Array.isArray(v.offsetY)?(0,rt.TN)(v.offsetY[0],v.offsetY[1]):v.offsetY||0},lifetime:Array.isArray(v.lifetime)?(0,rt.QC)(v.lifetime[0],v.lifetime[1]):v.lifetime,velX:Array.isArray(v.velX)?(0,rt.TN)(v.velX[0],v.velX[1]):v.velX,velY:Array.isArray(v.velY)?(0,rt.TN)(v.velY[0],v.velY[1]):v.velY,accX:Array.isArray(v.accX)?(0,rt.TN)(v.accX[0],v.accX[1]):v.accX,accY:Array.isArray(v.accY)?(0,rt.TN)(v.accY[0],v.accY[1]):v.accY,alpha:Array.isArray(v.alpha)?(0,rt.QC)(v.alpha[0],v.alpha[1]):v.alpha,rotVel:Array.isArray(v.rotVel)?(0,rt.QC)(v.rotVel[0],v.rotVel[1]):v.rotVel,alphaDecayFn:v.alphaDecayFn,loop:s};r.add(new Vn(g))}return s||(r.lifetime=p.reduce((function(t,e){return Math.max(t,e.lifetime[1])}),0),r.elapsed=0,r._reset=function(){this.remove(!1),this.onDead&&this.onDead(),this.elapsed=0;for(var t=this.children.length-1;t>-1;t--)this.children[t]._reset()},r.update=function(t){this.elapsed+=t,this.elapsed>this.lifetime&&this._reset()}),r}return Xn(n,null,[{key:"feed",value:function(t,e,n){for(var r=0;r<e;r++)for(var o=0,i=t.children.length;o<i;o++)t.children[o].update(n)}}]),n}(t.Z);function Hn(t){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jn(t,e){return(Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gn(t,e){return!e||"object"!==Hn(e)&&"function"!=typeof e?Qn(t):e}function Qn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const tr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jn(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kn(r);if(o){var n=Kn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Gn(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),$n(Qn(t=i.call(this,["pause","over","play","complete","halt"])),"name",null),$n(Qn(t),"level",1),$n(Qn(t),"elapsed",0),t}return e=a,(n=[{key:"set",value:function(t){this.name=t}},{key:"is",value:function(t){return t===this.name}},{key:"pause",value:function(){this.is("paused")||(this.emit("pause"),this.set("paused"))}},{key:"play",value:function(){this.is("playing")||(this.emit("play"),this.set("playing"))}},{key:"over",value:function(t){this.is("over")||(this.emit("over",t),this.set("over"))}},{key:"complete",value:function(t,e){this.is("completed")||(this.emit("complete",t,e),this.set("completed"))}},{key:"halt",value:function(){this.is("halted")||(this.set("halted"),this.emit("halt"))}}])&&Wn(e.prototype,n),a}(ot.Z);var er=I.Z.isMobile?.6:1;const nr=function(t,e,n){return'\n    <div \n        class="'.concat(Ee.imgBtn," ").concat(n||"",'" \n        id="').concat(t,'" \n        style="width: ').concat(e.width*er,"px; height: ").concat(e.height*er,"px; background: url(").concat(e.src,'); background-size: contain !important;"\n    >\n    </div>\n    ')};var rr=n(1);ce()(rr.Z,{insert:"head",singleton:!1});const or=rr.Z.locals||{};function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ar=I.Z.isMobile?960:1500,cr="pause-btn",sr="resume-btn",ur="orb-av",lr="timer",fr="orb-ind",hr="orb-exp",pr="orb-exp-ind",yr="cross-btn",dr="reset-btn",br="overlay",vr="pause-overlay",gr="cur-time-ind",mr="cur-time",wr="best-time-ind",Or="best-time",Ar="continue",xr="rva";const jr=function(t,e,n,r,o,i,a,c,s,u,l,f,h,p,y){if(I.Z.testMode)return{updateTiler:function(){}};var d=2;t.content=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return'\n        <div id="'.concat(vr,'" class="').concat(or.blurOverlay,'">PAUSED</div>\n        ').concat(nr(fr,t.orb,or.hidden),'\n        <div id="').concat(lr,'" class="').concat(or.timer," ").concat(or.hidden,'"> 0000:0 </div>\n        <div id="').concat(ur,'" class="').concat(or.txt," ").concat(or.hidden,'"> ').concat(e," </div>\n        ").concat(nr(cr,t.pause,or.hidden),"\n        ").concat(nr(sr,t.resume,or.hidden),"\n        ").concat(nr(pr,t.orb,or.hidden),'\n        <div id="').concat(hr,'" class="').concat(or.txt," ").concat(or.hidden,'"> &times; ').concat(n,' </div>\n        <div id="').concat(xr,'" class="').concat(or.tooltip," ").concat(or.hidden,'" style="font-size: 1.5em"> watch ad to continue</div>\n        ').concat(nr(dr,t.reset,or.hidden),"\n        ").concat(nr(yr,t.cross,or.hidden),"\n    ")}(n,r.getOrbCount(),d);var b=I.Z.isMobile&&e.getCtrlBtns(),v=t.get("#".concat(fr)),g=t.get("#".concat(ur)),m=t.get("#".concat(hr)),w=t.get("#".concat(pr)),O=t.get("#".concat(xr)),A=t.get("#".concat(cr)),x=t.get("#".concat(sr)),j=t.get("#".concat(dr)),S=t.get("#".concat(yr)),P=t.get("#".concat(lr)),k=t.get("#".concat(vr)),C=function(t,e,n,r,o,i,a,c,s){var u=function(t,e){var n=_.create("div");return n.domNode.setAttribute("class","".concat(Ee.imgBtn," ").concat(e||"")),n.domNode.setAttribute("style","width: ".concat(t.width*er,"px; height: ").concat(t.height*er,"px; background: url(").concat(t.src,"); object-size: cover; background-size: cover !important;")),n.width=t.width,n.height=t.height,n}(t[e]()?o:i,c?or.hidden:or.dead);return u.on("click",(function(){if(r.is("playing")){var c=!t[e]();t[n](c),u.domNode.style.background="url(".concat(c?o.src:i.src,")"),u.domNode.style.backgroundSize="contain",a.play()}})),u}(r,"getSound","setSound",o,n.soundOn,n.soundOff,f,h);t.add(C),b&&t.add(b.left).add(b.right).add(b.axn);var E,R,D=function(t){g.content=t},T=function(){I.Z.isMobile&&(b.left.hide(),b.right.hide(),b.axn.hide())},M=function(t){v.pos=(0,B.qj)(t,v,"left","top",20,20),g.pos=(0,B.EJ)(v,g,"right",10),A.pos=(0,B.qj)(t,A,"right","top",-20,20),C.pos=(0,B.EJ)(A,C,"left-start",I.Z.isMobile?15:-12.5),P.pos=(0,B.EJ)(A,P,"bottom-end",0,10),j.pos=(0,B.qj)(t,j,"center","center"),x.pos=(0,B.EJ)(j,x,"top",0,-10),w.pos=(0,B.EJ)(x,w,"right",20),m.pos=(0,B.EJ)(w,m,"right",10),O.pos=(0,B.EJ)(x,O,"top",0,-15),S.pos=(0,B.EJ)(j,S,"bottom",0,10),function(t){I.Z.isMobile&&(b.left.pos=(0,B.qj)(t,b.left,"left","bottom",20,-30),b.right.pos=(0,B.EJ)(b.left,b.right,"right",22.5),b.axn.pos=(0,B.qj)(t,b.right,"right","bottom",-20,-35))}(t),k.domNode.style.width="".concat(t.width,"px"),k.domNode.style.height="".concat(t.height,"px")},Z=function(){x.hide(),j.hide(),S.hide(),w.hide(),m.hide(),C.show(),A.show(),v.show(),g.show(),P.show(),O.hide(),I.Z.isMobile&&(b.left.show(),b.right.show(),b.axn.show())},X=function(){x.show(),j.show(),S.show(),w.hide(),m.hide(),C.hide(),A.hide(),v.hide(),g.hide(),P.hide(),T(),x.domNode.style.background="url(".concat(n.resume.src,")"),x.domNode.style.backgroundSize="cover"},Y=function(){!function(){var t=s(e.pos.x);x.show(),j.show(),S.show(),C.hide(),A.hide(),P.hide(),T();var o=y.rvaSupported(),i=!!t,a=r.getOrbCount(),c=i&&!(a>=d)&&o,u=i&&!c;x.domNode.style.background="url(".concat(c?n.rva.src:n.resume.src,")"),x.domNode.style.backgroundSize="contain",c?O.show():(console.log({checkpointExists:i,showRva:c}),u?(w.show(),m.show()):(v.hide(),g.hide()))}()},N=function(e,r){t.clear(),t.content=function(t,e,n){return'\n        <div class="'.concat(or.overlay," ").concat(or.hidden,'" id="').concat(br,'">  </div>\n        <div class="').concat(or.time," ").concat(or.hidden,'" id="').concat(gr,'">finished in:</div>\n        <div class="').concat(or.timeVal," ").concat(or.hidden,'" id="').concat(mr,'"> ').concat(e.toFixed(2),'s </div>\n        <div class="').concat(or.time," ").concat(or.hidden,'" id="').concat(wr,'"> record time: </div>\n        <div class="').concat(or.timeVal," ").concat(or.recTimeVal," ").concat(or.hidden,'" id="').concat(Or,'"> ').concat(0===n||e<n?"new!":n.toFixed(2)+"s"," </div>\n        ").concat(nr(Ar,t,"".concat(or.hidden," ").concat(or.continue)),"\n    ")}(n.resume,e,r);var o=t.get("#".concat(br)),a=t.get("#".concat(gr)),c=t.get("#".concat(mr)),s=t.get("#".concat(wr)),u=t.get("#".concat(Or)),l=t.get("#".concat(Ar));o.domNode.style.width="".concat(I.Z.viewport.width,"px"),o.domNode.style.height="".concat(I.Z.viewport.height,"px"),s.pos=(0,B.qj)(I.Z.viewport,(0,B.$e)(s,u,"x"),"center","center"),u.pos=(0,B.EJ)(s,u,"right",8),a.pos=(0,B.EJ)(s,s,"top-start",0,-8),c.pos=(0,B.EJ)(a,c,"right",8),l.pos=(0,B.EJ)((0,B.EO)([s,u]),l,"bottom",0,16),l.on("click",(function(){var e;l.domNode.remove(),s.domNode.remove(),a.domNode.remove(),u.domNode.remove(),c.domNode.remove(),e=function(){t.clear(),i(!0)},y.playIntstAd().then(e).catch(e)})),o.domNode.style.opacity=.8,a.show(),c.show(),s.show(),u.show(),l.show()},L=(E=function(){var t={_val:!1,setVal:function(t){if(t!==this._val){if(this._val=t,t)return S.domNode.style.display="none",j.domNode.style.display="none",x.domNode.style.display="none",O.domNode.style.display="none",m.domNode.style.display="none",void(w.domNode.style.display="none");S.domNode.style.display="",j.domNode.style.display="",x.domNode.style.display="",O.domNode.style.display="",m.domNode.style.display="none",w.domNode.style.display="none"}},getVal:function(){return this._val}},n=function(t){a(),e.pos.x=t.x,e.pos.y=t.y},i=function(){var n=e.pos.x;a(),n>ar&&c(),o.elapsed=0,o.play(),u.play(),t.setVal(!1)},f=function(){t.getVal()||(t.setVal(!0),Math.random()<I.Z.showAdOnRestart?y.playIntstAd().then(i).catch(i):i())};return[function(){if(!t.getVal()){console.log("&times; ".concat(d)),m.domNode.innerHtml="&times; ".concat(d);var i=s(e.pos.x),a=y.rvaSupported(),c=!!i,h=r.getOrbCount(),p=h>=d,b=c&&!p&&a,v=c&&!b;if(v&&!p)return l.play();if(u.play(),v&&p)return console.log({orbExpAmt:d}),r.setOrbCount(h-d),n(i),o.play(),void d++;if(b){t.setVal(!0);var g=function(){n(i),o.play(),t.setVal(!1),d=2};y.playRva().then(g).catch(g)}else d=2,f()}},f]}(),R=2,function(t){if(Array.isArray(t))return t}(E)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(E,R)||function(t,e){if(t){if("string"==typeof t)return ir(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ir(t,e):void 0}}(E,R)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),U=L[0],z=L[1],F=function(){I.Z.testMode||o.is("paused")||o.is("completed")||(k.domNode.style.display="flex",p.pause())},V=function(){o.is("paused")||o.is("completed")||(k.domNode.style.display="none",p.resume())},q=function(t){return o.is("playing")&&"Escape"===t.key?o.pause():o.is("over")&&"Enter"===t.key?U():o.is("paused")&&"Enter"===t.key?o.play():void 0};return I.Z.isMobile||document.addEventListener("keydown",q),window.addEventListener("focus",V),window.addEventListener("blur",F),document.addEventListener("blur",F),document.addEventListener("focus",V),o.on("play",Z),o.on("pause",X),o.on("over",Y),o.on("complete",N),I.Z.viewport.on("change",M),r.on("orb-update",D),A.on("click",(function(){o.is("playing")&&(o.pause(),u.play())})),x.on("click",(function(){if(!o.is("playing")&&!o.is("completed"))return o.is("paused")?(o.play(),u.play()):void U()})),S.on("click",(function(){o.is("playing")||o.is("completed")||(i(!1),u.play())})),j.on("click",(function(){o.is("playing")||o.is("completed")||z()})),M(I.Z.viewport),{teardownUI:function(){I.Z.isMobile||document.removeEventListener("keydown",q),window.removeEventListener("blur",F),window.removeEventListener("focus",V),document.removeEventListener("blur",F),document.removeEventListener("focus",V),I.Z.viewport.off("change",M),r.off("orb-update",D),o.off("play",Z),o.off("pause",X),o.off("over",Y),o.off("complete",N)},updateTimer:function(t){if(o.is("playing")){var e=Math.floor(t),n=Math.floor(10*(t-e)),r=t<10?"000":t<100?"00":t<1e3?"0":"";P.content="".concat(r).concat(e,":").concat(n)}}}};function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pr(Object(n),!0).forEach((function(e){Cr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Cr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Er(t,e,n){return(Er="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Br(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Rr(t,e){return(Rr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ir(t,e){return!e||"object"!==Sr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Br(t){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Dr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Br(r);if(o){var n=Br(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ir(this,t)});function a(t){var e,n=t.player,r=(t.uiRoot,t.data),o=t.bg,c=t.fbg,s=t.factories,u=(t.levelDataId,t.uiImages,t.onStateChange,t.gameState),l=t.music,f=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["player","uiRoot","data","bg","fbg","factories","levelDataId","uiImages","onStateChange","gameState","music"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var h=new Je({data:r,bg:o,fbg:c,player:n,factories:s});return(e=i.call(this,kr(kr({},f),{},{world:{width:h.width,height:h.height}}))).gameState=u,e.player=n,e.music=l,e.add(h),e.resetRecursively=function(){h.resetRecursively()},e}return e=a,(n=[{key:"update",value:function(t){if(Er(Br(a.prototype),"update",this).call(this,t),this.music)return this.gameState.is("completed")?this.music.playing&&this.music.pause():void(!this.music.playing&&this.music.play())}},{key:"onRemove",value:function(){this.music&&this.music.pause()}}])&&_r(e.prototype,n),a}(un.Z);var Tr=Object.freeze({RECT:"rectangle",CIRC:"circle",PLANK:"plank"});const Mr=function(t){var e=t.hitCirc?Tr.CIRC:Tr.RECT,n=!!t.hitbox,r=!!t.width&&!!t.height;if(e===Tr.RECT&&!n&&!r)throw new Error("Unable to determine entity shape}");return e};var Zr=function(t,e){var n=(0,B.Uz)(t),r=(0,B.Uz)(e);return(0,rt.ge)(n,r)},Xr=function(t,e){return(0,rt.rA)((0,B.SF)(e),(0,B.Uz)(t))},Yr=function(t,e){return(0,rt.rA)((0,B.SF)(t),(0,B.Uz)(e))};const Nr=function(t,e,n){var r=Mr(t),o=Mr(e),i=n&&n.rigid&&n.movable;return r===Tr.RECT&&o===Tr.RECT?function(t){var e=t?rt.Ht:rt.ex;return function(t,n){var r=(0,B.SF)(t),o=(0,B.SF)(n);return e(r,o)}}(i):r===Tr.CIRC&&o===Tr.CIRC?Zr:r===Tr.CIRC&&o===Tr.RECT?Xr:r===Tr.RECT&&o===Tr.CIRC?Yr:void 0};function Lr(t){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ur(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fr(t,e){return(Fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vr(t,e){return!e||"object"!==Lr(e)&&"function"!=typeof e?qr(t):e}function qr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hr(t){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Jr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Hr(r);if(o){var n=Hr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Vr(this,t)});function a(t){var e,n=t.player,r=t.sound,o=t.storage,c=t.temp,s=void 0!==c&&c,u=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["player","sound","storage","temp"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ur(Object(n),!0).forEach((function(e){Wr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},u)),Wr(qr(e),"chasing",!1),e.player=n,e.sound=r,e.hitbox={x:5,y:5,width:14,height:14},e.testCol=Nr(qr(e),n),e.active=!0,e.storage=o,e.temp=s,e}return e=a,(n=[{key:"update",value:function(){if(this.active){var t=this.player.pos.x+this.player.width/2-this.pos.x,e=this.player.pos.y+this.player.width/2-this.pos.y;(0,rt.nP)(t,e)>14400&&!this.chasing||(this.chasing=!0,this.pos.x+=t/60,this.pos.y+=e/60,this.testCol(this,this.player)&&this.player.visible&&(this.sound.play(),this.storage.setOrbCount(this.storage.getOrbCount()+1),this.remove()))}}},{key:"reset",value:function(){this.chasing=!1,this.temp&&this.remove()}},{key:"onRemove",value:function(){this.parent=null,this.chasing=!1}}])&&zr(e.prototype,n),a}(qn);function Gr(t){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Kr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function to(t,e){return(to=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function eo(t,e){return!e||"object"!==Gr(e)&&"function"!=typeof e?no(t):e}function no(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oo=Object.freeze({x:9,y:0,width:93,height:200});const io=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&to(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ro(r);if(o){var n=ro(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return eo(this,t)});function a(t){var e,n=t.endY,r=t.uSound,o=t.dSound,c=t.speed,s=void 0===c?150:c,u=t.pos,l=t.player,f=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["endY","uSound","dSound","speed","pos","player"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qr(Object(n),!0).forEach((function(e){Kr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({frame:"gate",pos:u},f))).endY=n,e.startY=u.y,e.initDir=(0,rt.Xx)(e.endY-e.startY),e.dir=e.initDir,e.dist=Math.abs(e.endY-e.startY),e.period=e.dist/s,e.t=0,e.uSound=r,e.dSound=o,e.player=l,e.testCol=Nr(no(e),l),e.hitbox=oo,e}return e=a,(n=[{key:"updatePos",value:function(t){this.t+=t;var e=this.dist*rt.bh.cubicIn(this.t/this.period);this.pos.y=(this.dir===this.initDir?this.startY:this.endY)+e*this.dir;var n=1===this.startToEndDir?(0,rt.uZ)(this.startY,this.endY,this.pos.y):(0,rt.uZ)(this.endY,this.startY,this.pos.y);if(n!==this.pos.y){this.t=0,this.dir*=-1,this.pos.y=n;var r=this.pos.x+this.w/2-this.player.pos.x,o=this.pos.y+this.h/2-this.player.pos.y;if(r*r+o*o>16e4)return;if(1===this.dir)return this.uSound.play();this.dSound.play()}}},{key:"reset",value:function(){this.pos.Y=this.startY,this.velY=this.velY0}},{key:"update",value:function(t){this.updatePos(t),this.testCol(this,this.player)&&this.player.visible&&this.player.explode()}}])&&$r(e.prototype,n),a}(wt.Z);function ao(t){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function so(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uo(t,e,n){return e&&so(t.prototype,e),n&&so(t,n),t}function lo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ho(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bo(t);if(e){var o=bo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return po(this,n)}}function po(t,e){return!e||"object"!==ao(e)&&"function"!=typeof e?yo(t):e}function yo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bo(t){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vo=Math.PI,go=[1.5,2],mo=[16,36],wo=[180,180],Oo=[0,vo],Ao=function(t){lo(n,t);var e=ho(n);function n(){var t,r,o;return co(this,n),!0,(o="forceUpdate")in(r=yo(t=e.call(this,{frame:"wind"})))?Object.defineProperty(r,o,{value:true,enumerable:!0,configurable:!0,writable:!0}):r[o]=true,t.period=(0,rt.QC)(go[0],go[1]),t.amp=(0,rt.TN)(mo[0],mo[1]),t.height=(0,rt.TN)(wo[0],wo[1]),t.swirlOffset=(0,rt.QC)(Oo[0],Oo[1]),t.t=0,t}return uo(n,[{key:"update",value:function(t){this.t+=t;var e=this.t/this.period;this.pos.y=-this.height*rt.bh.linear(e),this.pos.x=this.amp*Math.sin(this.swirlOffset+4*vo*e),this.alpha=1-rt.bh.quadOut(e),e>1&&(this.t=0)}}]),n}(wt.Z);const xo=function(t){lo(n,t);var e=ho(n);function n(t,r,o,i){var a;co(this,n),(a=e.call(this,t)).pos.x=r-6,a.pos.y=o-9,a.player=i,a.hitbox={x:-25,y:-200,width:50,height:200},a.testCol=Nr(yo(a),i);for(var c=0;c<60;c++)a.add(new Ao);return a.feed(240,1/60),a}return uo(n,[{key:"feed",value:function(t,e){for(var n=t-1;n>-1;n--)for(var r=this.children.length-1;r>-1;r--)this.children[r].update(e)}},{key:"update",value:function(t){if(this.testCol(this,this.player)&&this.player.visible){var e=this.player.pos.x+this.player.width/2-this.pos.x,n=this.player.pos.y+this.player.width/2-this.pos.y,r=(0,rt.nP)(e,n);if(r<4096)return;this.player.controls.switchState("jumping",this.player),this.player.velY-=I.Z.gravity*(r/32400)*t}}},{key:"reset",value:function(){}},{key:"onRemove",value:function(){this.parent=null}}]),n}(t.Z);function jo(t){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function So(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Po(t,e){return(Po=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ko(t,e){return!e||"object"!==jo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Co(t){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const _o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Po(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Co(r);if(o){var n=Co(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ko(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).tint=[0,0,0,0],e.vel=1,e.tintVal=0,e.forceUpdate=!0,e}return e=a,(n=[{key:"update",value:function(t){this.tintVal+=.2*t*this.vel,this.tintVal>.16?(this.vel=-1,this.tintVal=.16):this.tintVal<0&&(this.vel=1,this.tintVal=0),this.tint[0]=this.tintVal,this.tint[1]=this.tintVal,this.tint[2]=this.tintVal}}])&&So(e.prototype,n),a}(wt.Z);function Eo(t){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Io(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bo(t,e,n){return e&&Io(t.prototype,e),n&&Io(t,n),t}function Do(t,e){return(Do=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function To(t,e){return!e||"object"!==Eo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mo(t){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Zo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Do(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Mo(e);if(n){var o=Mo(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return To(this,t)});function o(t,e,n){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Ro(this,o),(i=r.call(this)).invisible=!0,i.delay=a,i.duration=t,i.elapsed=0,i.onTick=e,i.onDone=n,i}return Bo(o,null,[{key:"attachedTo",value:function(t){return function(e){return t.add(new o(e))}}}]),Bo(o,[{key:"update",value:function(t){if(this.delay>0)this.delay-=t;else{if(this.elapsed+=t,this.elapsed>this.duration)return this.onDone&&this.onDone(),void this.remove();this.onTick&&this.onTick(this.elapsed/this.duration)}}}]),o}(t.Z);function Xo(t){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function No(t,e){return(No=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lo(t,e){return!e||"object"!==Xo(e)&&"function"!=typeof e?Uo(t):e}function Uo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zo(t){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&No(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=zo(r);if(o){var n=zo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Lo(this,t)});function a(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(o=i.call(this,{frame:"ball",pos:{x:t,y:e}})).pos0={x:t,y:e},o.player=r,o.tint=[.05,0,-.05,0],o.anchor={x:o.width/2,y:o.height/2},o.radius=o.width/2,o.alpha=.6,Object.assign(Uo(o),Vo(1)),Rn.makeMovable(Uo(o),{roll:!0}),o.seqs=JSON.parse(n),o.seqIdx=-1,o.seq=null,o.initiated=!1,o.dead=!1,o.testCol=Nr(Uo(o),r),o.nextSeq(),o}return e=a,(n=[{key:"reset",value:function(){}},{key:"nextSeq",value:function(){var t,e,n,r=this;if(this.seqIdx++,this.seqIdx>this.seqs.length-1)return this.dead=!0,t=this,e=this.alpha,.6,n=function(){return r.remove()},void t.add(new Zo(.6,(function(n){t.alpha=e*(1-n)}),n));this.seq=this.seqs[this.seqIdx],this.seq.jumpTo?(this.velSign=(0,rt.Xx)(this.seq.jumpTo-this.pos.y),this.velY=this.velSign*this.seq.speed,this.velX=this.seq.velX||0,this.accY=this.seq.acc||I.Z.gravity):this.seq.rollTo&&(this.velSign=(0,rt.Xx)(this.seq.rollTo-this.pos.x),this.accY=0,this.velX=this.velSign*this.seq.speed,this.velY=0)}},{key:"checkSeq",value:function(){this.seq.jumpTo?this.pos.y*this.velSign>this.seq.jumpTo*this.velSign&&(this.pos.y=this.seq.jumpTo,this.nextSeq()):this.seq.rollTo&&this.pos.x*this.velSign>this.seq.rollTo*this.velSign&&(this.pos.x=this.seq.rollTo,this.nextSeq())}},{key:"update",value:function(t){if(!this.dead){if(this.updateFlash(t),this.initiated)return Rn.update(this,t),void this.checkSeq();this.initiated=this.testCol(this,this.player)}}}])&&Yo(e.prototype,n),a}(n(391).TexRegion),Vo=function(t){return{alpha:.7,elapsed:0,period:t||.6,updateFlash:function(t){if(this.elapsed+=t,this.elapsed>this.period)switch(this.elapsed=0,this.alpha){case.7:this.alpha=.6;break;case.6:this.alpha=.7}}}};const qo=Fo;function Ho(t){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Go(t,e){return(Go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qo(t,e){return!e||"object"!==Ho(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ko(t){return(Ko=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const $o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Go(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ko(r);if(o){var n=Ko(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Qo(this,t)});function a(t,e,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;return Wo(this,a),(r=i.call(this,{frame:n,pos:{x:t,y:e}})).fromX=t,r.fromY=e,r.toX=o,r.toY=c,r.velX=o-t==0?0:(0,rt.Xx)(o-t)*s,r.velY=c-e==0?0:(0,rt.Xx)(c-e)*s,r.clampX0=r.fromX<r.toX?r.fromX:r.toX,r.clampX1=r.toX>r.fromX?r.toX:r.fromX,r.clampY0=r.fromY<r.toY?r.fromY:r.toY,r.clampY1=r.toY>r.fromY?r.toY:r.fromY,r}return e=a,(n=[{key:"update",value:function(t){var e=this.pos.x+this.velX*t,n=this.pos.y+this.velY*t;this.pos.x=(0,rt.uZ)(this.clampX0,this.clampX1,e),this.pos.y=(0,rt.uZ)(this.clampY0,this.clampY1,n),this.pos.x!==e&&(this.velX*=-1),this.pos.y!==n&&(this.velY*=-1)}}])&&Jo(e.prototype,n),a}(wt.Z);function ti(t){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ei(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ni(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ri(t,e,n){return(ri="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ci(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function oi(t,e){return(oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ii(t,e){return!e||"object"!==ti(e)&&"function"!=typeof e?ai(t):e}function ai(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ci(t){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var si=Math.PI;const ui=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oi(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ci(r);if(o){var n=ci(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ii(this,t)});function a(t,e,n){var r,o,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,l=arguments.length>6?arguments[6]:void 0;return ei(this,a),(o=i.call(this,t,e,n,c,s,u)).anchor={x:o.width/2,y:o.height/2},o.player=l,o.radius=o.width/2,o.hitCirc=null!==(r=o.hitCirc)&&void 0!==r?r:{x:0,y:0,radius:o.radius-2},o.rotation=0,o.testCol=Nr(ai(o),l),(o.velX||o.velY)&&(o.forceUpdate=!0),o}return e=a,(n=[{key:"update",value:function(t){var e=(this.velX-this.velY)*t/(2*this.radius);ri(ci(a.prototype),"update",this).call(this,t),this.rotation+=e||si*t,this.testCol(this,this.player)&&this.player.visible&&this.player.explode()}}])&&ni(e.prototype,n),a}($o);function li(t){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yi(t,e,n){return(yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gi(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function di(t,e){return(di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bi(t,e){return!e||"object"!==li(e)&&"function"!=typeof e?vi(t):e}function vi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gi(t){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wi=24,Oi=48;const Ai=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&di(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gi(r);if(o){var n=gi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return bi(this,t)});function a(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,u=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],p=arguments.length>10?arguments[10]:void 0,y=arguments.length>11?arguments[11]:void 0;hi(this,a);var d=u?"vlhd":"hlhd",b=u?"vlbod":"hlbod",v=u?2:wi,g=u?wi:10,m=u?0:Oi,w=u?Oi:0;mi(vi(n=i.call(this,t,e,d,r,o,c)),"startX",void 0),mi(vi(n),"startY",void 0),n.startX=t,n.startY=e,n.player=p;for(var O=0;O<s;O++){var A=new wt.Z({frame:b});A.pos.x+=v+m*O,A.pos.y+=g+w*O,A.alpha=h?1:0,n.add(A)}return n.hitbox={x:u?2:0,y:u?0:2,width:u?12:wi+Oi*s,height:u?wi+Oi*s:wi},n.testCol=Nr(vi(n),n.player),n.on=h,l&&(n.period=l,n.t=0,n.sounds=y),n.delay=f,n}return e=a,(n=[{key:"update",value:function(t){if(yi(gi(a.prototype),"update",this).call(this,t),this.delay>0)this.delay-=t;else if(this.elapsed+=t,this.testCol(this,this.player)&&this.player.visible&&this.on&&this.player.explode(),this.period&&(this.t+=t,!(this.t<=this.period))){this.on=!this.on,this.t=0;var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return fi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fi(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.children);try{for(n.s();!(e=n.n()).done;)e.value.alpha=this.on?1:0}catch(t){n.e(t)}finally{n.f()}var r=this.pos.x-this.player.pos.x,o=this.pos.y-this.player.pos.y;r*r+o*o>9e4||(this.on?this.sounds.on.play():this.sounds.off.play())}}},{key:"reset",value:function(){this.pos.x=this.startX,this.pos.y=this.startY,this.t=0}}])&&pi(e.prototype,n),a}($o);function xi(t){return(xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Si(t,e){return(Si=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pi(t,e){return!e||"object"!==xi(e)&&"function"!=typeof e?ki(t):e}function ki(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ci(t){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ei=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Si(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ci(r);if(o){var n=Ci(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Pi(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),_i(ki(n=i.call(this,t)),"_player",null),_i(ki(n),"testCol",null),qn.feed(ki(n),120,.02),n.hitbox={x:-20,width:40,y:-15,height:17},n.onTouch=e,n}return e=a,(n=[{key:"reset",value:function(){}},{key:"update",value:function(){this.player&&this.testCol(this,this.player)&&(this.pos.x,this.pos.y,this.remove(),this.onTouch())}},{key:"onRemove",value:function(){this.parent=null}},{key:"player",get:function(){return this._player},set:function(t){this._player||(this._player=t,this.testCol=Nr(this,t))}}])&&ji(e.prototype,n),a}(qn);function Ri(t){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Di(t,e){return(Di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ti(t,e){return!e||"object"!==Ri(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mi(t){return(Mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zi="lcr1",Xi=["lcr2","lcr3"];const Yi=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Di(t,e)}(c,e);var n,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mi(o);if(i){var n=Mi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ti(this,t)});function c(t,e,n,r,o){var i,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:75,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8?arguments[8]:void 0;return Ii(this,c),(i=a.call(this,{frame:Zi,pos:{x:t,y:e}})).dmgFacs=n,i.orbPool=r,i.player=f,i.sounds=o,i.luck=s,i.temp=l,i.setDamage(u),i.reset=function(){i.alpha=1,i.setDamage(u)},i}return n=c,(r=[{key:"setDamage",value:function(t){if(this.damage=(0,rt.uZ)(0,Xi.length,t),this.damage>0)return this.frame=Xi[this.damage-1];this.frame=Zi}},{key:"takeDamage",value:function(t){Math.abs(t)<300||(this.damage++,this.sounds.crack.play(),this.damage>Xi.length?this.break(t):this.frame=Xi[this.damage-1])}},{key:"break",value:function(e){this.temp?this.remove():this.alpha=0;var n=e>0?"down":"up",r=this.dmgFacs[n].create();if(r.pos.x=this.pos.x,r.pos.y=this.pos.y,this.sounds.snap.play(),Math.random()<this.luck/100){var o=this.orbPool.create(this.pos.x-6+this.width/2,this.pos.y-6+this.height/2,null,this.player);o.active=!1,o.add(new Zo(.6,null,(function(){o.active=!0}))),t.Z.get(s).add(o)}t.Z.get(s).add(r)}}])&&Bi(n.prototype,r),c}(wt.Z);function Ni(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Li=function(){function t(e){var n=e.factory,r=e.size,o=e.free,i=e.reset;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.factory=n,this.size=r,this.free=o,this.reset=i,this.list=Array(r).fill(!1),this.lastIdx=0}var e,n;return e=t,(n=[{key:"create",value:function(){this.lastIdx=(this.lastIdx+1)%this.list.length;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.list[this.lastIdx]?(this.reset&&this.reset.apply(this,[this.list[this.lastIdx]].concat(e)),this.free&&this.free(this.list[this.lastIdx])):this.list[this.lastIdx]=this.factory.apply(this,e);var r=this.list[this.lastIdx];return r}}])&&Ni(e.prototype,n),t}();function Ui(t){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fi(t,e){return(Fi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vi(t,e){return!e||"object"!==Ui(e)&&"function"!=typeof e?qi(t):e}function qi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hi(t){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Wi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fi(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Hi(r);if(o){var n=Hi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Vi(this,t)});function a(t,e,n,r,o){var c,s,u,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),l={x:2,y:0,width:86,height:88},(u="hitbox")in(s=qi(c=i.call(this,{pos:{x:t,y:e},frame:"crane"})))?Object.defineProperty(s,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[u]=l,c.prevPosY=c.pos.y,c.prevPosX=c.pos.x,c.mat="metal",c.movable=!0,c.dispY=r-e,c.meanY=e,c.period=o,c.t=0,c}return e=a,(n=[{key:"update",value:function(t){this.t+=t,this.pos.y=this.meanY+rt.bh.smoothStep(this.t/this.period)*this.dispY,this.t>this.period&&(this.meanY=this.meanY+this.dispY,this.pos.y=this.meanY,this.dispY*=-1,this.t=0),this.velY=(this.pos.y-this.prevPosY)/t}}])&&zi(e.prototype,n),a}(wt.Z);var Ji=n(644),Gi=n.n(Ji);function Qi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ki(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const $i=Object.freeze({oneOff:!1,resolveX:function(t,e,n,r){var o=(0,B.SF)(e),i=(0,B.mn)(t);t.velX=r?t.velX:0,r&&(e.unduePosXUpdate=.5*n),n>0?(0,B.uF)(t,o.x-i.width-i.x):(0,B.uF)(t,o.x+o.width-i.x)},resolveY:function(t,e,n){var r=(0,B.SF)(e),o=(0,B.mn)(t);t.velY=0,n>0?(0,B.aZ)(t,r.y-o.height-o.y):(0,B.aZ)(t,r.y+r.height-o.y)}}),ta=Object.freeze({oneOff:!1,resolveX:function(t,e,n){if(!t.offEdge){var r=(0,B.SF)(e),o=(0,B.Uz)(t),i=t.hitCirc,a=(0,rt.uZ)(r.y,r.y+r.height,o.y+o.radius),c=0;if(a===r.y||a===r.y+r.height){var s=Math.abs(a-(o.y+o.radius));c=o.radius-Math.sqrt(o.radius*o.radius-s*s)}var u=t.pos.x,l=n-(e.movable?e.pos.x-e.prevPosX:0);l>0?(0,B.uF)(t,r.x-i.x-2*o.radius+c):(0,B.uF)(t,r.x+r.width-i.x-c);var f=(l+(t.pos.x-u))/l;t.velX=c?(0,rt.Xx)(t.velX):0,t.rotation=t.prevRot+f*(t.rotation-t.prevRot)}},resolveY:function(t,e,n){if(!t.offEdge){var r=(0,B.SF)(e),o=t.hitCirc,i=(0,B.Uz)(t),s=(0,rt.uZ)(r.x,r.x+r.width,i.x+i.radius),u=n-(e.movable?e.pos.y-e.prevPosY:0),l=0;if(s===r.x||s===r.x+r.width){var f=Math.abs(s-(i.x+i.radius));l=i.radius-Math.sqrt(i.radius*i.radius-f*f)}if(t.velY=e.movable&&e.velY>0?e.velY:0,u>0){var h=!1;if(l){var p=s===r.x?-1:1;if((0,rt.Xx)(t.velX)===p)t.velX+=2*p,h=!0;else{t.offEdge=p,t.offCorner=e;var y=(0,rt.z4)(r.y-(i.y+i.radius),r.x+(1===p?r.width:0)-(i.x+i.radius));(-1===p&&y<a||1===p&&y>c)&&(t.velX=p*Math.max(175,Math.abs(t.velX)))}}return(0,B.aZ)(t,r.y-o.y-2*i.radius+l),h}(0,B.aZ)(t,r.y+r.height-o.y-l)}}});function ea(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const na=function(){function e(n){var r=this,o=n.entity,i=n.block,a=n.blocks,c=n.onHit,s=void 0===c?function(){}:c,u=n.rigid,l=void 0!==u&&u,f=n.movable,h=void 0===f||f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.entity=o,this.oneToOne=Boolean(i)&&!Boolean(a),this.onHit=s,this.block=i,this.blocks=a,this.evaluateUpdateFn=function(){var e=t.Z.get(r.blocks),n=t.Z.get(r.block),o=r.oneToOne?n:e&&e.children[0];if(o)return r.testFn=Nr(r.entity,o,{rigid:l,movable:h}),function(t,e,n){var r=n.rigid,o=n.collision;if(!r)return function(){return o.test(o.onHit)};var i=function(t,e,n){var r=Mr(t),o=Mr(e);if(r===Tr.RECT&&o===Tr.RECT)return $i;if(r===Tr.CIRC&&o===Tr.RECT)return ta;throw new Error("No resolver found for shapes ".concat(r," and ").concat(o))}(t,e);return i.oneOff?function(){o.test((function(e){i.resolve(t,e),o.onHit(e)}))}:function(){var e=t.pos.x-t.prevPosX,n=t.pos.y-t.prevPosY;t.pos.y=t.prevPosY,o.test((function(n){var r=t.velX;i.resolveX(t,n,e),o.onHit(n,r,0,!(t.pos.x===t.prevPosX))}),!0),t.pos.y+=n,o.test((function(e){var r=t.velY;if(i.resolveY(t,e,n))return t.onFall&&t.onFall();o.onHit(e,0,r,!(t.pos.y===t.prevPosY))}),!1)}}(r.entity,o,{rigid:l,movable:h,collision:r})}}var n,r;return n=e,(r=[{key:"resolve",value:function(t,e,n){var r=n&&t.movable?t.pos.y-t.prevPosY:0;t.pos.y-=r,0!==t.alpha&&this.testFn(this.entity,t)&&e(t),t.pos.y+=r}},{key:"test",value:function(e,n){if(this.oneToOne){var r=t.Z.get(this.block);this.resolve(r,e,n)}else{var o=t.Z.get(this.blocks);if(o)for(var i=o.children.length-1;i>-1;i--){var a=o.children[i];this.resolve(a,e,n)}}}},{key:"update",value:function(){var t=this.evaluateUpdateFn();t&&(this.update=t,this.evaluateUpdateFn=null,t())}}])&&ea(n.prototype,r),e}();function ra(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return oa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oa(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function oa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ia(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var aa=function(t){var e=t.which||t.keyCode;if("number"==typeof e)return e;switch(t.key){case"Left":case"ArrowLeft":return 37;case"Right":case"ArrowRight":return 39;case"Up":case"ArrowUp":return 38;case"A":case"a":return 65;case"D":case"d":return 68;case"W":case"w":return 87;case" ":return 32;default:return-1}};const ca=function(){function t(e){var n=this;for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mappings=e,this.keys={},e){var o=e[r];if(Array.isArray(o)){var i,a=ra(o);try{for(a.s();!(i=a.n()).done;){var c=i.value;this.keys[c]={pressed:!1,held:!1}}}catch(t){a.e(t)}finally{a.f()}}else this.keys[o]={pressed:!1,held:!1}}this.keysArr=Object.values(this.keys),this.keysLen=this.keysArr.length,document.addEventListener("keydown",(function(t){var e=aa(t),r=n.keys[e];r&&(r.held=!0,r.pressed=!0)})),document.addEventListener("keyup",(function(t){var e=aa(t),r=n.keys[e];r&&(r.held=!1)})),document.addEventListener("blur",this.resetAll.bind(this)),window.addEventListener("blur",this.resetAll.bind(this))}var e,n;return e=t,(n=[{key:"get",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"held",r=this.mappings[t];return Array.isArray(r)?r.find((function(t){return!0===e.keys[t][n]})):this.keys[r][n]}},{key:"reset",value:function(){for(var t=this.keysLen-1;t>-1;t--)this.keysArr[t].pressed=!1}},{key:"resetAll",value:function(){for(var t=this.keysLen-1;t>-1;t--)this.keysArr[t].pressed=!1,this.keysArr[t].held=!1}}])&&ia(e.prototype,n),t}();function sa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const ua=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mappings=e,this.btns={};var r=function(t){n.btns[t]={pressed:!1,held:!1};var r=e[t];r.on("touchstart",(function(){var e=n.btns[t];e.pressed=!0,e.held=!0})),r.on("touchend",(function(){var e=n.btns[t];e.pressed=!1,e.held=!1}))};for(var o in e)r(o);this.btnsArr=Object.values(this.btns),this.btnsLen=this.btnsArr.length}var e,n;return e=t,(n=[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"held";return this.btns[t][e]}},{key:"reset",value:function(){for(var t=this.btnsLen-1;t>-1;t--)this.btnsArr[t].pressed=!1}}])&&sa(e.prototype,n),t}();function la(t){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ha(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pa(t,e,n){return e&&ha(t.prototype,e),n&&ha(t,n),t}function ya(t,e){return(ya=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function da(t,e){return!e||"object"!==la(e)&&"function"!=typeof e?ba(t):e}function ba(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function va(t){return(va=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ga(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ma=function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ya(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=va(e);if(n){var o=va(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return da(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3?arguments[3]:void 0;return fa(this,o),ga(ba(t=r.call(this,n)),"stateSwitched",!1),t.gameState=a,t.speed=e,t.states={offEdge:new Aa(ba(t)),jumping:new Oa(ba(t),i),rolling:new wa(ba(t))},t.state=t.states.jumping,t.state.limitReached=!0,t}return pa(o,[{key:"cleanup",value:function(){this.reset(),this.stateSwitched=!1}},{key:"switchState",value:function(t){var e;if(!this.stateSwitched&&t!==this.state.name){this.state.onExit&&this.state.onExit(),this.state=this.states[t];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.state.onEnter&&(e=this.state).onEnter.apply(e,r),this.stateSwitched=!0}}},{key:"update",value:function(t,e){this.gameState.is("playing")&&(this.state.update(t,e),this.cleanup())}}]),o}(t)},wa=function(){function t(e){fa(this,t),ga(this,"name","rolling"),this.controls=e}return pa(t,[{key:"onEnter",value:function(){}},{key:"update",value:function(t,e){this.controls.get("left")?t.velX-=(t.velX>0?3:1)*this.controls.speed*e:this.controls.get("right")?t.velX+=(t.velX<0?3:1)*this.controls.speed*e:Math.abs(t.velX)<10&&(t.velX=0),this.controls.get("axn")&&this.controls.switchState("jumping",t)}}]),t}(),Oa=function(){function t(e,n){fa(this,t),ga(this,"name","jumping"),ga(this,"jmpVel",-260),ga(this,"maxJvelInc",5.5),ga(this,"minJmpVel",-375),ga(this,"mxJmpVel",150),ga(this,"first",!1),this.controls=e,this.onJump=n}return pa(t,[{key:"onEnter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||t.velY>this.mxJmpVel?this.limitReached=!0:(this.limitReached=!1,t.velY+=this.jmpVel,this.first=!0)}},{key:"onHalt",value:function(){this.limitReached=!0}},{key:"update",value:function(t,e){if(this.first&&t.velY<0&&this.onJump(),this.first=!1,this.controls.get("left")&&(t.velX-=(t.velX>0?3:1)*this.controls.speed*e),this.controls.get("right")&&(t.velX+=(t.velX<0?3:1)*this.controls.speed*e),this.controls.get("axn")){if((t.velY<this.minJmpVel||t.velY>this.mxJmpVel)&&(this.limitReached=!0),this.limitReached)return;t.velY+=this.jmpVel*Math.min(this.maxJvelInc,t.velY*t.velY/100)*e}else this.limitReached=!0}}]),t}(),Aa=function(){function t(e){fa(this,t),ga(this,"name","offEdge"),this.controls=e}return pa(t,[{key:"update",value:function(t,e){this.controls.get("left")&&(t.velX-=this.controls.speed*e),this.controls.get("right")&&(t.velX+=this.controls.speed*e),t.velX=(0,rt.uZ)(-100,100,t.velX)}}]),t}(),xa=ma(ca),ja=ma(ua),Sa=n(987),Pa=n.n(Sa),ka=n(229),Ca=n.n(ka),_a=n(661);ce()(_a.Z,{insert:"head",singleton:!1});const Ea=_a.Z.locals||{};function Ra(t){return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ia(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ba(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Da(t,e){return(Da=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ta(t,e){return!e||"object"!==Ra(e)&&"function"!=typeof e?Ma(t):e}function Ma(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Za(t){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ya=I.Z.isMobile?ja:xa,Na=I.Z.isMobile?function(){var t=[{name:"left",style:"background: url(".concat(Pa(),"); transform: scale(-1, 1);"),width:64,height:55},{name:"right",style:"background: url(".concat(Pa(),");"),width:64,height:55},{name:"axn",style:"background: url(".concat(Ca(),"); transform: rotate(270deg);"),width:55,height:55}];return Object.freeze(t.reduce((function(t,e){var n=_.create("div");return n.classList.add(Ea.ctrlBtn),n.domNode.style=e.style,n.domNode.style.width="".concat(e.width,"px"),n.baseOpacity=.75,n.domNode.style.opacity=.75,n.domNode.style.height="".concat(e.height,"px"),n.domNode.style.backgroundSize="contain",n.domNode.style.backgroundRepeat="no-repeat",n.width=e.width,n.height=e.height,t[e.name]=n,t}),{}))}:function(){return Object.freeze({left:[37,65],right:[39,68],axn:[32,87,38]})},La=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Da(t,e)}(u,e);var n,r,o,a,c=(o=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Za(o);if(a){var n=Za(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ta(this,t)});function u(t){var e,n=t.speed,r=void 0===n?48:n,o=t.width,a=void 0===o?64:o,s=t.height,l=void 0===s?64:s,f=t.fricX,h=void 0===f?4:f,p=t.shard,y=t.cinder,d=t.controls,b=t.sounds,v=t.state,g=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["speed","width","height","fricX","shard","cinder","controls","sounds","state"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),e=c.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ia(Object(n),!0).forEach((function(e){Xa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({frame:"ball"},g)),Xa(Ma(e),"remDt",0),Xa(Ma(e),"smooth",!0),e.width=a,e.height=l,e.radius=a/2,e.hitCirc={x:0,y:0,radius:e.radius},e.rotation=0,e.anchor={x:a/2,y:l/2},e.pos.y=100,e.shard=p,e.cinder=y,e.sounds=b,e.fricX0=h,e.state=v,e.controls=d||new Ya(r,Na(),(function(){b.jump.play()}),e.state),e.wallCollision=new na({entity:Ma(e),blocks:i,rigid:!0,movable:!1,onHit:e.onWallCol.bind(Ma(e))}),e.spikeCollision=new na({entity:Ma(e),blocks:"spikes",rigid:!1,movable:!1,onHit:e.explode.bind(Ma(e))}),e.magnetCollision=new na({entity:Ma(e),blocks:"magnets",rigid:!0,movable:!1,onHit:e.onMagnetCol.bind(Ma(e))}),e.crateCollision=new na({entity:Ma(e),blocks:"crates",rigid:!0,movable:!1,onHit:e.onCrateCol.bind(Ma(e))}),Rn.makeMovable(Ma(e),{accY:I.Z.gravity,roll:!0,fricX:h}),e}return n=u,(r=[{key:"onFall",value:function(){this.controls.switchState("jumping",this,!0)}},{key:"getCtrlBtns",value:function(){if(!I.Z.isMobile)throw new Error("control buttons are not defined for non-touch/desktop devices");return this.controls.mappings}},{key:"onWallCol",value:function(t,e,n,r){if(r){var o=Math.abs(n||e)||0;o>(t.movable?200:75)&&this.sounds[t.mat||"concrete"].play(Math.min(1,o/800))}if(n){if(n>0)return this.fricX=this.fricX0,this.controls.switchState("rolling");this.controls.state&&"jumping"===this.controls.state.name&&this.controls.state.onHalt()}}},{key:"onMagnetCol",value:function(t,e,n,r){if(r){var o=Math.abs(n||e)||0;o>100&&this.sounds.metal.play(Math.min(1,o/3e3))}n&&n<0&&(this.velY=-100,"jumping"===this.controls.state.name&&(this.fricX=2*this.fricX0,this.controls.state.onHalt()))}},{key:"onCrateCol",value:function(t,e,n,r){if(n){if(t.takeDamage(n),n>0)return this.fricX=this.fricX0,this.controls.switchState("rolling");this.controls.state&&"jumping"===this.controls.state.name&&this.controls.state.onHalt()}}},{key:"explode",value:function(){I.Z.testMode||this.state.is("completed")||(this.cinder.pos.x=this.shard.pos.x=this.pos.x+this.width/2,this.cinder.pos.y=this.shard.pos.y=this.pos.y+this.height/2,this.alpha=0,t.Z.get(s).add(this.cinder),t.Z.get(s).add(this.shard),this.state.over(this.pos.x),this.sounds.player_exp.play(),this.sounds.player_din.play(.8),this.velX=this.velY=0)}},{key:"update",value:function(t){this.state.is("game-over")||this.state.is("paused")||(this.controls.update(this,t),Boolean(this.offEdge)?Rn.updateOffEdge(this,t):Rn.update(this,t),this.wallCollision.update(),this.crateCollision.update(),this.magnetCollision.update(),I.Z.testMode||this.spikeCollision.update())}},{key:"onRemove",value:function(){this.parent=null}},{key:"visible",get:function(){return 0!==this.alpha&&this._visible}},{key:"offEdge",set:function(t){this.controls.switchState("offEdge",t),this._offEdge=t},get:function(){return this._offEdge}}])&&Ba(n.prototype,r),u}(wt.Z);Xa(La,"sounds",["player_din","concrete","wood","metal","jump","player_exp"]);const Ua=La;var za=n(284),Fa=n.n(za),Va=n(562),qa=n.n(Va),Ha=n(210),Wa=n.n(Ha),Ja=n(524),Ga=n.n(Ja),Qa=n(976),Ka=n.n(Qa),$a=n(399),tc=n.n($a),ec=n(224),nc=n.n(ec),rc=n(315),oc=n.n(rc),ic=n(73),ac=n.n(ic);function cc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const lc=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];cc(this,t),uc(this,"maxX",0),this.checkpoints=e.sort((function(t,e){return t.x-e.x}))}var e,n;return e=t,(n=[{key:"updateX",value:function(t){this.maxX=Math.max(this.maxX,t)}},{key:"reset",value:function(){this.maxX=0}},{key:"get",value:function(){var t=this;if(0!==this.checkpoints.length)return this.checkpoints.findLast((function(e){return t.maxX>=e.x}))}}])&&sc(e.prototype,n),t}();function fc(t){return(fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pc(t,e){return(pc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yc(t,e){return!e||"object"!==fc(e)&&"function"!=typeof e?dc(t):e}function dc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bc(t){return(bc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const gc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pc(t,e)}(c,e);var n,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bc(o);if(i){var n=bc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return yc(this,t)});function c(t){var e,n=t.game,r=t.uiRoot,o=t.storage,i=t.sdk;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),vc(dc(e=a.call(this)),"initialized",!1),vc(dc(e),"soundPools",["gate"]);var s=n.assetsCache;return e.storage=o,e.sdk=i,e.game=n,e.uiRoot=r,e.state=new tr,e.state.on("pause",(function(){n.pause()})),e.state.on("play",(function(){n.resume()})),o.on("sound-update",(function(t){t?n.turnOnSound():n.turnOffSound()})),s.once("load",(function(){var t=new _n({resource:s.get(Fa()),resourceId:Fa(),meta:s.get(qa())}),r=s.get(Gi()),i=new qn(r.shard),a=new qn(r.cinder),c=Ua.sounds.reduce((function(e,n){return e[n]=t.create(n),e}),{});if(i.onRemove=function(){i.parent=null},a.onRemove=function(){a.parent=null},e.soundSprite=t,e.btnSound=t.create("btn"),e.errSound=t.createPool("err_alt"),e.contSound=t.create("continue"),e.music={music1:t.create("music1")},e.player=new Ua({width:64,height:64,fill:"brown",speed:350,fricX:3,pos:{x:300,y:0},shard:i,cinder:a,sounds:c,state:e.state}),e.factories=function(t){var e=t.soundSprite,n=t.assetsCache,r=t.storage,o=t.player,i=t.state,a=e.create("gate_u"),c=e.create("gate_d"),s=e.createPool("orb"),u=e.create("end"),l={on:e.createPool("las_on"),off:e.createPool("las_off")},f=n.get(Gi()),h=function(t,e,n,r){return new Li({factory:function(e,o,i,a){return new Jr(Object.assign({},f.orb,{player:a,pos:{x:e,y:o},sound:n,storage:r,temp:t}))},size:e,free:function(t){t.chasing=!1,t.remove()},reset:function(t,e,n){t.chasing=!1,t.pos.x=e,t.pos.y=n}})},p=h(!1,5,s,r),y=h(!0,2,s,r),d=new Li({factory:function(t,e,n,r){return new xo(f.wind,t,e,r)},size:2,free:function(t){t.remove()},reset:function(t,e,n){t.pos.x=e,t.pos.y=n-10}}),b=new Ei(f.fire,(function(){var t=r.getHiscore(i.level)||0,e=i.elapsed;i.level===r.getCurLevel()&&i.level<ee.length&&r.setCurLevel(i.level+1),(0===t||e<t)&&r.setHiscore(i.level,e),u.play(),i.complete(e,t)})),v=Object.freeze({up:new Li({factory:function(){var t=new qn(f.crateUp);return t.onRemove=function(){t.parent=null},t},size:2}),down:new Li({factory:function(){var t=new qn(f.crateDown);return t.onRemove=function(){t.parent=null},t},size:2})}),g={snap:e.createPool("w_snap"),crack:e.createPool("w_crack")};return{player:function(t,e,n){return o.reset=function(){o.pos.x=t,o.pos.y=e,o.alpha=1,o.velY=o.velX=0,o.controls.switchState("jumping",o,!0)},o.rotation=!0===n.slide?NaN:0,o.reset(),o},gate:function(t,e,n,r){return new io(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qi(Object(n),!0).forEach((function(e){Ki(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({pos:{x:t,y:e},colSound:null,uSound:a,dSound:c,player:r},n))},orb:p.create.bind(p),wind:d.create.bind(d),fire:function(t,e,n,r){return b.parent&&b.remove(),b.player=r,b.pos.x=t,b.pos.y=e,b},magnet:function(t,e){return new _o({pos:{x:t,y:e},frame:"magnet"})},ball:function(t,e,n,r){return new qo(t,e,n.seq,r)},sb1:function(t,e,n,r){return new ui(t,e,"sb1",n.toX,n.toY,n.speed,r)},sb2:function(t,e,n,r){return new ui(t,e,"sb2",n.toX,n.toY,n.speed,r)},sb3:function(t,e,n,r){return new ui(t,e,"sb3",n.toX,n.toY,n.speed,r)},sb4:function(t,e,n,r){return new ui(t,e,"sb4",n.toX,n.toY,n.speed,r)},sb5:function(t,e,n,r){return new ui(t,e,"sb5",n.toX,n.toY,n.speed,r)},sb6:function(t,e,n,r){return new ui(t,e,"sb6",n.toX,n.toY,n.speed,r)},lcr1:function(t,e,n,r){return new Yi(t,e,v,y,g,n.luck,n.dmg,n.temp,r)},vlhd:function(t,e,n,r){return new Ai(t,e,n.toX,n.toY,n.speed,n.num,!0,n.period,n.delay,n.on,r,l)},hlhd:function(t,e,n,r){return new Ai(t,e,n.toX,n.toY,n.speed,n.num,!1,n.period,n.delay,n.on,r,l)},bus:function(t,e,n){return new Wi(t,e,n.toX,n.toY,n.period)},default:function(t,e,n){return new wt.Z({pos:{x:t,y:e},frame:n.name})}}}({soundSprite:t,assetsCache:s,storage:o,player:e.player,state:e.state}),n.renderer.api===T){var u=s.get(Me());e.bg=new wn({z:2.5,zAtop:1,viewport:I.Z.viewport,subject:e.player,instF:!1,entYOffset:0,tiles:u.map((function(t){return new wt.Z({frame:t.name,pos:{x:t.x,y:t.y}})}))}),e.add(e.bg)}e.uiImages={cross:s.get(Ga()),resume:s.get(Ca()),pause:s.get(Wa()),orb:s.get(tc()),reset:s.get(Ka()),soundOn:s.get(nc()),soundOff:s.get(oc()),rva:s.get(ac())}})),e}return n=c,(r=[{key:"setLevel",value:function(t,e){var n,r=new Dr({player:this.player,data:t,viewport:I.Z.viewport,subject:this.player,factories:this.factories,music:e,gameState:this.state});return this.add(r),this.game.renderer.changeBackground(I.Z.isMobile||this.game.renderer.api===D?t.mob_bg:t.bg,Qe()),this.game.renderer.canvas.style.backgroundPosition=null!==(n=t.bgPos)&&void 0!==n?n:"-50%",this.game.renderer.tint=t.tint&&t.tint.split(",").slice(0,3),r.parent=null,this.bg&&(this.bg.overlay=t.pxbg&&(0,rt.t)(t.pxbg),this.bg.layoutTiles(r.world)),r}},{key:"unsetLevel",value:function(){if(this.children){var e=this.children.length-1;e>-1&&t.Z.removeChild(this,this.children[e])}}},{key:"onEnter",value:function(e){var n=this,r=Math.min(e-1,ee.length-1),o=I.Z.testMode?{id:It()}:ee[r],i=o.id,a=o.music,c=Object.assign(this.game.assetsCache.get(i),o),s=this.setLevel(c,a&&this.music[a]),u=new lc(c.checkpoints);this.checkpoint=u;var l=function(){s.focusInst(),n.bg&&n.bg.focusInst()};l(),s.idx=r;var f=u.get.bind(u),h=jr(this.uiRoot,this.player,this.uiImages,this.storage,this.state,(function(t){return n.game.switchScreen(oe,!1,t)}),(function(){window.Node=t.Z,window.level=s,s.resetRecursively(),u.reset()}),l,f,this.btnSound,this.errSound,this.contSound,d,this.game,this.sdk),p=h.teardownUI,y=h.updateTimer;this.state.level=r+1,this.teardownUI=p,this.updateTimer=y,this.state.play()}},{key:"onExit",value:function(){this.unsetLevel(),this.teardownUI&&this.teardownUI(),this.game.reset(),this.state.halt(),this.state.elapsed=0}},{key:"update",value:function(e,n){this.checkpoint.updateX(this.player.pos.x),this.state.elapsed+=e,this.children.forEach((function(r){t.Z.updateRecursively(r,e,n,r)})),I.Z.testMode||this.updateTimer(this.state.elapsed)}}])&&hc(n.prototype,r),c}(t.Z);var mc=n(806);ce()(mc.Z,{insert:"head",singleton:!1});const wc=mc.Z.locals||{};var Oc="prev-btn",Ac="next-btn",xc="start-btn",jc="lev-info",Sc="lock",Pc="loading",kc="best-time",Cc="retry",_c=I.Z.isMobile?20:60,Ec=Object.freeze({width:24,height:24}),Rc='\n<div id="'.concat(Sc,'" class="').concat(wc.icon,'">\n    <svg xmlns="http://www.w3.org/2000/svg" fill="#ffe6d5" width="').concat(Ec.width,'" height="').concat(Ec.height,'" viewBox="0 0 24 24"><path d="M18 10v-4c0-3.313-2.687-6-6-6s-6 2.687-6 6v4h-3v14h18v-14h-3zm-5 7.723v2.277h-2v-2.277c-.595-.347-1-.984-1-1.723 0-1.104.896-2 2-2s2 .896 2 2c0 .738-.404 1.376-1 1.723zm-5-7.723v-4c0-2.206 1.794-4 4-4 2.205 0 4 1.794 4 4v4h-8z"/></svg>\n</div>\n'),Ic=function(t){return"Best Time: ".concat(t?t.toFixed(2)+"s":"n/a")};const Bc=function(t){var e=t.onStart,n=t.uiRoot,r=t.storage,o=t.level,i=t.maxLevel,a=t.images,c=t.assetsCache,s=t.contSound,u=t.chSound,l=t.errSound,f=t.syncColor,h=o,p=!1;n.content=function(t,e,n){return"\n        ".concat(nr(Oc,t.arrow,wc.prevBtn),"\n        ").concat(Rc,'\n        <div class="').concat(wc.infoTitle,'" id="').concat(jc,'">').concat("Level "+e,'</div> \n        <div class="').concat(wc.infoTitle," ").concat(wc.infoSub,'" id="').concat(kc,'">').concat(Ic(n),"</div>\n        ").concat(nr(Ac,t.arrow),"\n        ").concat(Re(xc,"START"),"\n    ")}(a,o,r.getHiscore(h)),f(o);var y=n.get("#".concat(Oc)),d=n.get("#".concat(Ac)),b=n.get("#".concat(xc)),v=n.get("#".concat(jc)),g=n.get("#".concat(Sc)),m=n.get("#".concat(kc)),w=function(t){var e=v.domNode.getBoundingClientRect(),n=e.width,r=e.height,o=m.domNode.getBoundingClientRect(),i=o.width,a=o.height;v.width=n,v.height=r,m.width=i,m.height=a,v.pos=(0,B.qj)(t,v,"center","center",0,-10),m.pos=(0,B.EJ)(v,m,"bottom",0,8),g.pos=(0,B.EJ)(m,Ec,"bottom",0,20)},O=function(t){w(t),y.pos=(0,B.qj)(t,y,"left","center",_c),d.pos=(0,B.qj)(t,d,"right","center",-_c),b.pos=(0,B.EJ)(m,b,"bottom",0,64)},A=function(t,e){g.domNode.style.opacity=t<=e||t>ee.length?0:1,b.domNode.style.opacity=t<=e?1:0},x=function(){if(!p){if(1===h)return l.play();h=Math.max(h-1,1);var t=r.getHiscore(h);m.content=Ic(t),v.content="Level ".concat(h),A(h,i),w(I.Z.viewport),u.play(),f(h)}},j=function(){if(!p){if(h>ee.length)return l.play();h=Math.min(h+1,ee.length+1);var t=r.getHiscore(h);v.content=h<=ee.length?"Level ".concat(h):"More Levels",m.content=h<=ee.length?Ic(t):"available elsewhere",A(h,i),w(I.Z.viewport),u.play(),f(h)}},S=function t(){p=!0,n.clear();var r=ee[h-1].id;if(!c.get(r)){n.content='\n        <div id="'.concat(Pc,'" style="width: 44px; height:  12px;" >\n            <div class="').concat(Ee.loadingDot," ").concat(Ee.dotA,'"></div>\n            <div class="').concat(Ee.loadingDot," ").concat(Ee.dotB,'"></div>\n            <div class="').concat(Ee.loadingDot," ").concat(Ee.dotC,'"></div>\n        </div>\n    ');var o=n.get("#".concat(Pc));return o.pos=(0,B.qj)(I.Z.viewport,o,"center","center"),ee.forEach((function(t){c.unload(t.id)})),c.load([r]),c.once("load",(function(){e(h),c.off("error")})),void c.once("error",(function(e){n.content='\n<div id="'.concat("err",'" class="').concat(wc.error," ").concat(wc.hidden,'">\n    ').concat("Connection Problem",'\n</div>\n<div id="').concat("retry",'" class="').concat(wc.retry," ").concat(wc.hidden,'">\n    RETRY\n</div>\n');var r=n.get("#".concat("err")),o=n.get("#".concat(Cc));r.pos=(0,B.qj)(I.Z.viewport,r,"center","center"),o.pos=(0,B.EJ)(r,o,"bottom",0,10),o.show(),r.show(),o.on("click",t)}))}e(h)},P=function(){if(!p){if(h>i)return l.play();I.Z.viewport.off("change",O),s.play(),S()}},k=function(t){var e=t.which||t.keyCode;if(e)switch(e){case 37:case 65:x();break;case 39:case 68:j();break;case 32:case 13:P()}else switch(t.key){case"Left":case"ArrowLeft":case"A":case"a":x();break;case"Right":case"ArrowRight":case"D":case"d":j();break;case" ":case"Enter":P()}};return!1===I.Z.isMobile&&document.addEventListener("keydown",k),y.on("click",x),d.on("click",j),b.on("click",P),I.Z.viewport.on("change",O),O(I.Z.viewport),function(){!1===I.Z.isMobile&&document.removeEventListener("keydown",k),y.off("click",x),d.off("click",j),b.off("click",P)}};function Dc(t){return(Dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mc(t,e){return(Mc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zc(t,e){return!e||"object"!==Dc(e)&&"function"!=typeof e?Xc(t):e}function Xc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yc(t){return(Yc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Lc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mc(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yc(r);if(o){var n=Yc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Zc(this,t)});function a(t){var e,n=t.game,r=t.uiRoot,o=t.storage;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Nc(Xc(e=i.call(this)),"background","#000000"),Nc(Xc(e),"curLevel",0),e.game=n,e.storage=o,e.uiRoot=r,n.assetsCache.once("load",(function(){var t=n.assetsCache,r=new _n({resource:t.get(Fa()),resourceId:Fa(),meta:t.get(qa())});e.contSound=r.createPool("continue"),e.chSound=r.createPool("change"),e.errSound=r.createPool("error"),e.teardownBg=Ze(Xc(e),t,null,n.renderer.api)})),e}return e=a,(n=[{key:"onEnter",value:function(t,e){var n=this,r=this.game,o=this.storage,i=this.uiRoot,a=this.contSound,c=this.chSound,s=this.errSound;t?(this.contSound.play(),this.curLevel=o.getCurLevel()):e&&(this.curLevel=Math.min(this.curLevel+1,ee.length)),this.teardownUI=Bc({onStart:function(t){r.switchScreen(ie,t),n.curLevel=t},uiRoot:i,images:{arrow:r.assetsCache.get(Pa()),resume:r.assetsCache.get(Ca())},assetsCache:r.assetsCache,storage:o,level:this.curLevel,maxLevel:o.getCurLevel(),contSound:a,chSound:c,errSound:s,syncColor:function(){r.renderer.changeBackground("rgb(17, 34, 55)"),n.container&&(n.container.overlay=[.033203125,.06640625,.107421875])}})}},{key:"onExit",value:function(){this.teardownUI(),this.teardownBg(),this.teardownUI=null}}])&&Tc(e.prototype,n),a}(t.Z);var Uc,zc=n(126),Fc=n.n(zc);function Vc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qc=function(t){var e;try{e=new nt(t)}catch(n){console.log(n),console.log("Webgl 2 not supported.. resorting to Canvas2D"),e=new N(t)}return e}({cnvQry:"#arena",scene:null,background:"#000000",viewport:I.Z.viewport}),Hc=new mt,Wc=new kt(new I.Z.StorageStrat(I.Z.storageId)),Jc=_.query("#ui-layer"),Gc=Wc.getCurLevel(),Qc=[{url:Gi(),msg:"loading particles"},Ga(),tc(),Wa(),Ka(),Ca(),nc(),oc(),ac(),Dt(),{url:Me(),msg:"loading background tiles"},{url:Pa(),msg:"loading ui assets"},{url:Fa(),msg:"loading audio sprite"},{url:qa(),msg:"loading audio sprite metadata"},{url:Fc(),msg:"loading images"},{url:De(),msg:"loading texture atlas"}];I.Z.testMode&&Qc.push(It());try{Qc.push({url:ee[Gc-1].id,msg:"loading level data"})}catch(t){console.log(t.message)}Qc.push(Me());var Kc=new Et(!!I.Z.SDKStrat&&new I.Z.SDKStrat),$c=(Vc(Uc={},ne,(function(t){return new Oe({game:t,uiRoot:Jc,assets:Qc,sdk:Kc})})),Vc(Uc,re,(function(t){return new sn({game:t,uiRoot:Jc,sdk:Kc})})),Vc(Uc,ie,(function(t){return new gc({game:t,uiRoot:Jc,storage:Wc,sdk:Kc})})),Vc(Uc,oe,(function(t){return new Lc({game:t,uiRoot:Jc,storage:Wc})})),Uc),ts=new j({renderer:qc,assetsCache:Hc,storage:Wc,screenFactories:$c});Kc.setOnPause((function(){return ts.pause()})),Kc.setOnResume((function(){return ts.resume()})),Wc.getSound()||ts.turnOffSound(),Hc.once("prog-end",(function(){var t=Hc.get(De()),e=Hc.get(Fc());qc.setTexatlas(e,t),wt.Z.injectAtlasmeta(t)})),ts.switchScreen(ne),ts.start()})()})();
//# sourceMappingURL=script.js.map